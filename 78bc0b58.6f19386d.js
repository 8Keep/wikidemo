(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{282:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var a=n(1),r=n(9),o=(n(0),n(441)),i={},c={id:"jme3/advanced/traverse_scenegraph",title:"traverse_scenegraph",description:"You can run a search across the whole scene graph and search for",source:"@site/docs/jme3/advanced/traverse_scenegraph.md",permalink:"/wikidemo/docs/jme3/advanced/traverse_scenegraph",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/traverse_scenegraph.md"},s=[],l={rightToc:s};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"You can run a search across the whole scene graph and search for\nindividual Spatials (",Object(o.b)("inlineCode",{parentName:"p"},"Nodes")," and ","`","Geometry","`","s) by custom criteria, such\nas the Spatial's name, or the Spatial's class, or the Spatial's user\ndata, or Spatial's Controls. You do this when you want modify the found\nnodes (move them, call a method, etc) but you don't have a local\nvariable for them."),Object(o.b)("h1",{id:"example-use-cases"},"Example Use Cases"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Example 1:")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You have created a procedural scene with lots of dynamically\ngenerated elements.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You want to find individual Spatials under ever-changing conditions\nand modify their state."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Example 2:")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You created a mostly static scene in the jMonkeyEngine SDK and\nexported it as .j3o file.\\\nThe scene also contains interactive objects, for example a particle\nemitter, spatials with user data, or spatials with custom controls.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You load the .j3o scene using the assetManager.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You want to interact with one of the loaded interactive scene\nelements in your Java code.\\\nFor example, you want to call ",Object(o.b)("inlineCode",{parentName:"p"},"emitAllParticles()")," on the particle\nemitter. Or you want to find all NPC's Geometries with a custom\nCivilianControl, and call the CivilianControl method that makes them\nstart acting their role."))),Object(o.b)("p",null,"In this case, you can use a SceneGraphVisitorAdapter to identify and\naccess the Spatials in question."),Object(o.b)("h1",{id:"code-sample"},"Code Sample"),Object(o.b)("p",null,"For each search, you create a ",Object(o.b)("inlineCode",{parentName:"p"},"com.jme3.scene.SceneGraphVisitorAdapter"),"\nthat defines your search criteria and what you want to do with the found\nSpatials. Then you call the ",Object(o.b)("inlineCode",{parentName:"p"},"depthFirstTraversal(visitor)")," or\n",Object(o.b)("inlineCode",{parentName:"p"},"breadthFirstTraversal(visitor)")," method of the Spatial (e.g. the\nrootNode, or better, a subnode) to start the search."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'SceneGraphVisitor visitor = new SceneGraphVisitor() {\n\n  @Override\n  public void visit(Spatial spatial) {\n    // search criterion can be control class:\n    MyControl control = spatial.getControl(MyControl.class);\n    if (control != null) {\n      // you have access to any method, e.g. name.\n      System.out.println("Instance of " + control.getClass().getName()\n                       + " found for " + spatial.getName());\n    }\n  }\n\n};\n\n// Now scan the tree either depth first...\nrootNode.depthFirstTraversal(visitor);\n// ... or scan it breadth first.\nrootNode.breadthFirstTraversal(visitor);\n')),Object(o.b)("p",null,'Which of the two methods is faster depends on how you designed the\nscengraph, and what tree element you are looking for. If you are\nsearching for one single Geometry that is a "leaf of the tree, and then\nstop searching, depth-first may be faster. If you search for a\nhigh-level grouping Node, breadth-first may be faster.'),Object(o.b)("p",null,"The choice of depth- vs breadth-first also influences the order in which\nfound elements are returned (children first or parents first). If you\nwant to modify user data that is inherited from the parent node (e.g.\ntransformations), the order of application is important, because the\nside-effects add up."),Object(o.b)("p",null,"You can use the SceneGraphVisitorAdapter class to scan separately for\nGeometry and Nodes."),Object(o.b)("h1",{id:"see-also"},"See Also"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../../jme3/the_scene_graph"}),"The Scene Graph"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../../jme3/advanced/spatial"}),"Spatial")))))}p.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},d=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=a,b=d["".concat(i,".").concat(h)]||d[h]||u[h]||o;return n?r.a.createElement(b,c({ref:t},l,{components:n})):r.a.createElement(b,c({ref:t},l))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);