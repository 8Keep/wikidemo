(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{348:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return r})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return s}));var a=n(1),o=n(9),i=(n(0),n(441)),l={},r={id:"jme3/external/3dsmax",title:"3dsmax",description:"Asset Management",source:"@site/docs/jme3/external/3dsmax.md",permalink:"/wikidemo/docs/jme3/external/3dsmax",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/external/3dsmax.md",sidebar:"main",previous:{title:"blender",permalink:"/wikidemo/docs/jme3/external/blender"},next:{title:"Logo",permalink:"/wikidemo/docs/logo"}},c=[{value:"Create Model and Bones",id:"create-model-and-bones",children:[]},{value:"Create the animation",id:"create-the-animation",children:[]},{value:"OgreMax settings",id:"ogremax-settings",children:[]},{value:"Export and Import",id:"export-and-import",children:[{value:"3ds Max Biped Animation to JME3",id:"3ds-max-biped-animation-to-jme3",children:[]}]},{value:"Creating a character in 3dsMax",id:"creating-a-character-in-3dsmax",children:[]},{value:"Creating a simple walk animation",id:"creating-a-simple-walk-animation",children:[]},{value:"Preparing the export and setting up OgreMax",id:"preparing-the-export-and-setting-up-ogremax",children:[]},{value:"Fixing the location",id:"fixing-the-location",children:[]},{value:"Export and Import",id:"export-and-import-1",children:[]}],m={rightToc:c};function s(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},m,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"asset-management"},"Asset Management"),Object(i.b)("p",null,"For the managing of assets in general, be sure to read the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"../../jme3/intermediate/multi-media_asset_pipeline"}),"Asset\nPipeline\nDocumentation"),".\nIt contains vital information on how to manage your asset files."),Object(i.b)("h1",{id:"creating-models-in-3dsmax"},"Creating models in 3dsMax"),Object(i.b)("p",null,"For this tutorial I used 3D Studio Max 2012 and OgreMax 2.4.3 free\nedition"),Object(i.b)("h2",{id:"create-model-and-bones"},"Create Model and Bones"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Create a new file")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the "Create" tab ',">",' "Geometry" ',">",' "Cylinder"'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-0.png",alt:"3dsmax-0.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Draw a cylinder, lets say with 8 height segments (must be enough for\na smooth deformation)")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Also check "Generate Mapping Coords."'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-1.png",alt:"3dsmax-1.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Click "Create" tab ',">",' "Systems" ',">",' "Bones"')),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-2.png",alt:"3dsmax-2.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Add some bones in the center of the cylinder")),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-3.png",alt:"3dsmax-3.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the cylinder, right click it and click "Convert To:" ',">",'\n"Convert to Editable Mesh" to prevent issues with OgreMax')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Click the "Modify" tab ',">",' "Modifier List" and add the "Skin"\nmodifier'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-4.png",alt:"3dsmax-4.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Beneath "Bones:" click "Add" and select all of your bones')),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-5.png",alt:"3dsmax-5.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"You may also edit the envelopes, but for a small test the default\nsettings are ok")),Object(i.b)("h2",{id:"create-the-animation"},"Create the animation"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the cylinder, and click "Display" tab ',">",' "Freeze Selected" so\nit is easier to select the bones during animation')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the two top bones and enable the "Auto Key" mode'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-6.png",alt:"3dsmax-6.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The first key frame will be created automatically. Move the\nanimation track slider to frame 5")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Move the selected bones a bit. The cylinder mesh will be deformed.\nBecause you are in the "Auto Key" mode, a key frame will be created'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-7.png",alt:"3dsmax-7.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Create some additional key frames. You may also select more bones\nand move or rotate them. I've created 25 frames and the last key\nframe equals the first, so the animation is loopable")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'After creating the animation, disable the "Auto Key" mode'))),Object(i.b)("h2",{id:"ogremax-settings"},"OgreMax settings"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Open the "OgreMax Scene Settings" dialog from the menu')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'In the "Meshes" tab, enable "Export XML Files" and disable "Export\nBinary Files" as well as "Export Vertex Colors"'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-8.png",alt:"3dsmax-8.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Click the "Environment" tab and uncheck "Export Environment\nSettings". Otherwise the JME importer will throw a\nNullPointerException')),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-9.png",alt:"3dsmax-9.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'If you have textured your model, you may also check "Copy Bitmaps to\nExport Directory" in the "Bitmaps" tab')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Unfreeze the cylinder by clicking "Display" tab ',">",' "Unfreeze All"\nand select it')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'While having the cylinder selected, open the "OgreMax Object\nSettings" dialog from the menu')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Open the "Mesh Animations" tab and select type "Skeleton", "Export\nSkeleton" : "Yes"')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Below "Mesh Animations" hit the "Add..." button')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Assign a name to the track, maybe "wobble". The track type must be\n"Skin. Set the right "Start/End Frames" for your animation'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-10.png",alt:"3dsmax-10.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Hit ok and you will see the animation in the table. You may add\nadditional animations by selecting other frame ranges, if desired")),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-11.png",alt:"3dsmax-11.png"}))),Object(i.b)("h2",{id:"export-and-import"},"Export and Import"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'When all animations are in the list, select "OgreMax" ',">",' "Export" ',">",'\n"Export Scene" and name the file "worm.scene"')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Create a JME test class that imports the file, get the animation\ncontroller and start the "wobble" animation'))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'import com.jme3.animation.AnimChannel;\nimport com.jme3.animation.AnimControl;\nimport com.jme3.animation.Skeleton;\nimport com.jme3.app.SimpleApplication;\nimport com.jme3.asset.plugins.FileLocator;\nimport com.jme3.light.AmbientLight;\nimport com.jme3.light.PointLight;\nimport com.jme3.material.Material;\nimport com.jme3.math.ColorRGBA;\nimport com.jme3.scene.Geometry;\nimport com.jme3.scene.Node;\nimport com.jme3.scene.Spatial;\nimport com.jme3.scene.control.LodControl;\nimport com.jme3.scene.debug.SkeletonDebugger;\n\n/**\n * This is a test class for loading a Ogre XML scene exported by OgreMax.\n *\n * @author Stephan Dreyer\n *\n */\npublic class TestOgreMaxImport extends SimpleApplication {\n\n  @Override\n  public void simpleInitApp() {\n    assetManager.registerLocator("Assets/model/ogre/test/", FileLocator.class);\n\n    // create the geometry and attach it\n    final Node model = (Node) assetManager.loadModel("worm.scene");\n    // resize it, because of the large 3dsmax scales\n    model.setLocalScale(.001f);\n\n    // attach to root node\n    rootNode.attachChild(model);\n    addLodControl(model);\n\n    final AnimControl ac = findAnimControl(model);\n\n    try {\n      // add a skeleton debugger to make bones visible\n      final Skeleton skel = ac.getSkeleton();\n      final SkeletonDebugger skeletonDebug = new SkeletonDebugger("skeleton",\n          skel);\n      final Material mat = new Material(assetManager,\n          "Common/MatDefs/Misc/Unshaded.j3md");\n      mat.setColor("Color", ColorRGBA.Green);\n      mat.getAdditionalRenderState().setDepthTest(false);\n      skeletonDebug.setMaterial(mat);\n      ((Node) ac.getSpatial()).attachChild(skeletonDebug);\n\n      // create a channel and start the wobble animation\n      final AnimChannel channel = ac.createChannel();\n      channel.setAnim("wobble");\n    } catch (final Exception e) {\n      e.printStackTrace();\n    }\n\n    // add some lights\n    rootNode.addLight(new AmbientLight());\n    rootNode.addLight(new PointLight());\n  }\n\n  public void addLodControl(final Spatial parent) {\n    if (parent instanceof Node) {\n      for (final Spatial s : ((Node) parent).getChildren()) {\n        addLodControl(s);\n      }\n    } else if (parent instanceof Geometry) {\n      final LodControl lc = new LodControl();\n      lc.setDistTolerance(1f);\n      parent.addControl(lc);\n    }\n  }\n\n  /**\n   * Method to find the animation control, because it is not on the models root\n   * node.\n   *\n   * @param parent\n   *          The spatial to search.\n   * @return The {@link AnimControl} or null if it does not exist.\n   */\n  public AnimControl findAnimControl(final Spatial parent) {\n    final AnimControl animControl = parent.getControl(AnimControl.class);\n    if (animControl != null) {\n      return animControl;\n    }\n\n    if (parent instanceof Node) {\n      for (final Spatial s : ((Node) parent).getChildren()) {\n        final AnimControl animControl2 = findAnimControl(s);\n        if (animControl2 != null) {\n          return animControl2;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  public static void main(final String[] args) {\n    new TestOgreMaxImport().start();\n  }\n}\n')),Object(i.b)("p",null,"You will see your worms strange movements. Have fun!"),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax-12.png",alt:"3dsmax-12.png"}))),Object(i.b)("h3",{id:"3ds-max-biped-animation-to-jme3"},"3ds Max Biped Animation to JME3"),Object(i.b)("p",null,"You can also use the biped operator to animate models, but you have to\nconsider a lot of things."),Object(i.b)("h2",{id:"creating-a-character-in-3dsmax"},"Creating a character in 3dsMax"),Object(i.b)("p",null,"I will not tell you in detail how to model a character. There I many\ngood tutorials on the web, I used ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://majoh.deviantart.com/art/Mandi-s-3dsmax-Biped-Tutorial-26515784"}),"that\none"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"You may create a biped before you start modeling, so it is quite\neasier to fit the proportions of the biped.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"After creating a model and a biped I got something like that:"))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/1.png",alt:"1.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'I added the "Meshmooth modifier with 2 iterations and got this\nresult:')),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_2.png",alt:"3dsmax_biped_2.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'After smoothing your mesh you could correct vertices with the "Edit\nMesh modifier. Finally you add the "Physique modifier.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Now you can edit your envelopes to fit your model."))),Object(i.b)("h2",{id:"creating-a-simple-walk-animation"},"Creating a simple walk animation"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the chest of your biped, choose "Motion (1) tab ',">",' "Foot Step\nMode (2) ',">",' "Create Multiple Footsteps (3)')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'You need to select the "In Place Mode (4), so the character moves in\nplace without changing its location.'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_3_1.png",alt:"3dsmax_biped_3_1.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'You can now play a bit with the settings, I adjusted "Actual Stride\nLength and "Actual Stride Height.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'For the "Number of Footsteps 6 will be sufficient because the\nanimation is cycled later.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Note:")," You can also create or edit footsteps by hand and move or\nrotate them.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'After all footsteps are created, hit the "Create Keys for Inactive\nFootsteps button in the "Footstep Operations panel')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'You can now check your animation by pressing the "Play button in the\ntimeline.'))),Object(i.b)("h2",{id:"preparing-the-export-and-setting-up-ogremax"},"Preparing the export and setting up OgreMax"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'The "OgreMax Scene Settings should be the same as shown above.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Because you want your animation to be looped, you've got to find two\nkey frames where the legs are nearly in the same position. For my\nsettings I've chosen the frames 48-78 for the walk animation.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Select the character mesh and open the "OgreMax Scene Settings\ndialog.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Open the "Mesh Animations" tab and select type "Skeleton", "Export\nSkeleton" : "Yes"')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Below "Mesh Animations" hit the "Add..." button'))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_4.png",alt:"3dsmax_biped_4.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Enter a name for the track, e.g. "walk.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Assure the track type is set to "Physique.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Set the start and end frames, for me it is 48-78.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Close the dialog by pushing "Ok.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("strong",{parentName:"p"},"Note:"),' It could be useful to create also a track "start',"_","run,\nthat blends between the stand and walk animation. I would use frame\n0-47 for that.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Because you have a smooth model with a lot of polygons, it may be\nuseful to create ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"../../jme3/advanced/mesh"}),"levels of detail\n(LOD)"),". When the camera is farther\naway, a low-poly mesh of your character will be rendered."))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_5.png",alt:"3dsmax_biped_5.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Open the "Mesh LOD tab in object settings.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'It will suffice to select the "Automatic setting, but if your\nanimation starts to look weird, you can create them by hand.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"I used 4 levels of LOD with a distance of 1. Don't worry about the\ndistance setting, you can change it later in JME.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"For the level reduction, I used 20 percent, which produce good\nresults. You may adjust all the settings depending on your needs.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Close the dialoque by clicking "Ok.'))),Object(i.b)("h2",{id:"fixing-the-location"},"Fixing the location"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Before you export you need to do a little fix, because your model is\nnot really located where you see it. JME will get into a lot of\ntrouble, if you don't change that.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Assure to save the max file. Sometimes OgreMax crashes the whole\napplication during export. If you want to change the animation after\nexport, you should reload this file because fixing the location\nchanges something I can't really figure out."))),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_6.png",alt:"3dsmax_biped_6.png"}))),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Right click the "Select and Move tool in the upper toolbar. A dialog\nwill pop up.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Set the X and Y location to 0 and close the dialog.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'There is another way to achieve this. If you have scaled, moved or\nrotated your model, just open the "Hierarchy tab and click\n"Transform and "Scale on the "Reset panel.'))),Object(i.b)("h2",{id:"export-and-import-1"},"Export and Import"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},'Now you can export your scene. Select only the mesh and use "Export\nselected objects. You will not need the whole scene including the\nbiped object, but the bones are created automatically during export.')),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Create a JME test class for the scene import."))),Object(i.b)("p",null,"For that, I extended the first class:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'import com.jme3.animation.AnimChannel;\nimport com.jme3.animation.AnimControl;\nimport com.jme3.animation.Skeleton;\nimport com.jme3.app.SimpleApplication;\nimport com.jme3.asset.plugins.FileLocator;\nimport com.jme3.light.AmbientLight;\nimport com.jme3.light.PointLight;\nimport com.jme3.material.Material;\nimport com.jme3.math.ColorRGBA;\nimport com.jme3.math.Vector3f;\nimport com.jme3.scene.Geometry;\nimport com.jme3.scene.Node;\nimport com.jme3.scene.Spatial;\nimport com.jme3.scene.control.LodControl;\nimport com.jme3.scene.debug.SkeletonDebugger;\nimport com.jme3.scene.shape.Box;\n\n/**\n * This is a test class for loading a Ogre XML scene exported by OgreMax.\n *\n * @author Stephan Dreyer\n *\n */\npublic class TestOgreMaxImport extends SimpleApplication {\n\n  @Override\n  public void simpleInitApp() {\n    assetManager.registerLocator("Assets/model/ogre/test/", FileLocator.class);\n\n    // create the geometry and attach it\n    final Node model = (Node) assetManager.loadModel("guy.scene");\n    // resize it, because of the large 3dsmax scales\n    model.setLocalScale(.02f);\n\n    // attach to root node\n    rootNode.attachChild(model);\n    addLodControl(model);\n\n    final AnimControl ac = findAnimControl(model);\n\n    try {\n      // add a skeleton debugger to make bones visible\n      final Skeleton skel = ac.getSkeleton();\n      final SkeletonDebugger skeletonDebug = new SkeletonDebugger("skeleton",\n          skel);\n      final Material mat = new Material(assetManager,\n          "Common/MatDefs/Misc/Unshaded.j3md");\n      mat.setColor("Color", ColorRGBA.Green);\n      mat.getAdditionalRenderState().setDepthTest(false);\n      skeletonDebug.setMaterial(mat);\n      ((Node) ac.getSpatial()).attachChild(skeletonDebug);\n\n      // create a channel and start the walk animation\n      final AnimChannel channel = ac.createChannel();\n      channel.setAnim("walk");\n    } catch (final Exception e) {\n      e.printStackTrace();\n    }\n\n    flyCam.setMoveSpeed(40f);\n    cam.setLocation(new Vector3f(15, 10, 15));\n    cam.lookAt(Vector3f.ZERO, Vector3f.UNIT_Y);\n    cam.setFrustumNear(1f);\n\n    // add some lights\n    rootNode.addLight(new AmbientLight());\n\n    final PointLight pl = new PointLight();\n    pl.setPosition(new Vector3f(-3f, 3f, 1f));\n    rootNode.addLight(pl);\n\n    // add a box as floor\n    final Box b = new Box(100f, 0.1f, 100f);\n    final Geometry geo = new Geometry("floor", b);\n\n    final Material mat = new Material(assetManager,\n        "Common/MatDefs/Misc/Unshaded.j3md");\n    mat.setColor("Color", ColorRGBA.LightGray);\n    geo.setMaterial(mat);\n\n    rootNode.attachChild(geo);\n  }\n\n  /**\n   * Method to traverse through the scene graph and add a {@link LodControl} to\n   * the mesh.\n   *\n   * @param parent\n   *          The Node to add the control to.\n   */\n  public void addLodControl(final Spatial parent) {\n    if (parent instanceof Node) {\n      for (final Spatial s : ((Node) parent).getChildren()) {\n        addLodControl(s);\n      }\n    } else if (parent instanceof Geometry) {\n      final LodControl lc = new LodControl();\n\n      // the distance for LOD changes is set here, you may adjust this\n      lc.setDistTolerance(1f);\n      parent.addControl(lc);\n    }\n  }\n\n  /**\n   * Method to find the animation control, because it is not on the models root\n   * node.\n   *\n   * @param parent\n   *          The spatial to search.\n   * @return The {@link AnimControl} or null if it does not exist.\n   */\n  public AnimControl findAnimControl(final Spatial parent) {\n    final AnimControl animControl = parent.getControl(AnimControl.class);\n    if (animControl != null) {\n      return animControl;\n    }\n\n    if (parent instanceof Node) {\n      for (final Spatial s : ((Node) parent).getChildren()) {\n        final AnimControl animControl2 = findAnimControl(s);\n        if (animControl2 != null) {\n          return animControl2;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  public static void main(final String[] args) {\n    new TestOgreMaxImport().start();\n  }\n}\n')),Object(i.b)("p",null,"After starting the class, you can see a nice smooth walk animation (if\nit's not smooth, you need to adjust your track frames):"),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_7.png",alt:"3dsmax_biped_7.png"}))),Object(i.b)("p",null,"As you can see, the LOD is working:"),Object(i.b)("p",null,Object(i.b)("img",Object(a.a)({parentName:"p"},{src:"/images/jme3/external/3dsmax_biped_8.png",alt:"3dsmax_biped_8.png"}))))}s.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=o.a.createContext({}),s=function(e){var t=o.a.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):r({},t,{},e)),n},b=function(e){var t=s(e.components);return o.a.createElement(m.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),b=s(n),d=a,u=b["".concat(l,".").concat(d)]||b[d]||p[d]||i;return n?o.a.createElement(u,r({ref:t},m,{components:n})):o.a.createElement(u,r({ref:t},m))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:a,l[1]=r;for(var m=2;m<i;m++)l[m]=n[m];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);