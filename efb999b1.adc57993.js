(window.webpackJsonp=window.webpackJsonp||[]).push([[282],{421:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return l})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return d}));var n=a(1),r=a(9),i=(a(0),a(441)),o={},l={id:"jme3/advanced/endless_terraingrid",title:"endless_terraingrid",description:":::note",source:"@site/docs/jme3/advanced/endless_terraingrid.md",permalink:"/wikidemo/docs/jme3/advanced/endless_terraingrid",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/endless_terraingrid.md"},s=[],c={rightToc:s};function d(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Deprecated. Look at\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://hub.jmonkeyengine.org/t/design-question-terrain/28771"}),"https://hub.jmonkeyengine.org/t/design-question-terrain/28771")," instead."))),Object(i.b)("p",null,"TerrainGrid is DEPRECATED."),Object(i.b)("p",null,'TerrainGrid is an extension built on top of the TerraMonkey tools like\nTerrainQuad and HeightMap, that provides "infinite Terrain paging\nroutines.\\\nThanks to G\xe1bor (\\@anthyon) and Brent (\\@sploreg) for this contribution!'),Object(i.b)("h1",{id:"sample-code"},"Sample Code"),Object(i.b)("p",null,"The classes with source code can be found in the\norg.jme3.terrain.geomipmapping and org.jme3.terrain.heightmap packages.\nAlso there are 3 tests prepared in the jme3test.terrain package:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainGridTest.java"}),"TerrainGridTest.java"),":\nuses an ImageBasedHeightMapGrid instance to load the tiles")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainFractalGridTest.java"}),"TerrainFractalGridTest.java"),":\nmakes use of the FractalHeightMapGrid class, and generates a terrain\nfrom noise")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainGridAlphaMapTest.java"}),"TerrainGridAlphaMapTest.java"),":\nshows how to use TerrainGridListener to change the material of the\ntiles"))),Object(i.b)("h1",{id:"specification"},"Specification"),Object(i.b)("p",null,"TerrainGrid is made up of the TerrainGrid class, and the HeightMapGrid\nand TerrainGridListener interfaces."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"TerrainGrid is the central class of the system. It takes care for\nhandling camera movement in LODUpdate, loading and unloading terrain\ntiles on demand, and notifying any registered listeners of changes.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"TerrainGridListener defines two events to listen to:"),Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"gridMoved(Vector3f): gets the new center as parameter after\nterrain update, so any objects can be added or removed as\nneeded.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Material tileLoaded(Material material, Vector3f cell): notifies\nthe system about a tile being loaded. Parameters are a cloned\nvalue of the material added to the TerrainGrid, and the cell of\nthe new tile. The system can change the material according to\nthis information (eg. load required alphamaps, etc)."))))),Object(i.b)("p",null,"Multiple listeners can be added to the TerrainGrid, they will be called\nin the order of addition, so it's possible to have multiple changes to\nthe material before completing the load of the tile."),Object(i.b)("p",null,"HeightMapGrid adds the possibility of loading terrain tiles on demand\ninstead of having a simple height array. There's no predefined way of\nhow to store these tiles, it only takes care of loading one HeightMap\nobject at given location at a time."),Object(i.b)("h1",{id:"motivation"},"Motivation"),Object(i.b)("p",null,"After playing around with the terrain in jME3, soon comes the\nrequirement of having larger explorable lands. Increasing the size of\none TerrainQuad leads to more memory usage, while it will still be easy\nto reach the worlds boundaries. That's why TerrainGrid was designed. It\nextends the TerraindQuad class and uses 4 HeightMaps (dark blue) as the\nfour sub-quad. This means that a terrain of size 513 will use tiles of\n257. Also an LRUCache is built into the terrain package, so surrounding\ntiles (green) can be pre-cached on a different thread, lowering the\nloading time. The quads are updated as the camera approaches the\nboundary of the light blue section."),Object(i.b)("h1",{id:"rationale"},"Rationale"),Object(i.b)("p",null,"The design of the TerrainGrid system was chosen carefully, so that\nminimal effort needs to be taken to switch from previous TerrainQuad\nuses. It has the same constructors with the small exception that instead\nof an array of heightmap it takes a HeightMapGrid instance. All other\nparameters are forwarded down to the underlying TerrainQuad system.\nThere exist also two basic HeightMapGrid implementations:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"ImageBasedHeightMapGrid: uses a sequentially numbered, 16 bit\ngrayscale heightmaps. The physical filename of these files can be\ngenerated through the Namer interface. When a tile cannot be found\nby the assetManager, an empty (all-zero) heightmap is created, and a\nwarning is added to the log.")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"FractalHeightMapGrid: uses a noise library to create a landscape on\nthe fly. The shape of the terrain can be controlled by the various\nparameters and postfilters of the fractals. With the help of this\ngrid implementation there's no limitation -- above of floating point\nprecision limits -- how far the camera can get. The tiles generated\nthis way can be cached to the filesystem, for later modification.\nThe FractalHeightMapGrid will always load from cache if a tile\nexists there!"))),Object(i.b)("h1",{id:"usage"},"Usage"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"instantiate a TerrainGrid object")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"set material, listeners, translation, scale, etc.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"add a LODControl instance to the object")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"call initialize with the camera location")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"(optional) add it to the physicsSpace as you would a TerrainQuad"))),Object(i.b)("p",null,"Further information about terrain and TerrainQuad can be found in the\nwiki at:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"../../jme3/beginner/hello_terrain"}),"jme3\ud83d\udd30hello","_","terrain"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"../../jme3/advanced/terrain"}),"jme3:advanced:terrain")))))}d.isMDXComponent=!0},441:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=r.a.createContext({}),d=function(e){var t=r.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l({},t,{},e)),a},b=function(e){var t=d(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=d(a),m=n,h=b["".concat(o,".").concat(m)]||b[m]||p[m]||i;return a?r.a.createElement(h,l({ref:t},c,{components:a})):r.a.createElement(h,l({ref:t},c))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,o[1]=l;for(var c=2;c<i;c++)o[c]=a[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);