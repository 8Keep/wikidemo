(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{141:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return m}));var n=a(1),r=a(9),o=(a(0),a(441)),i={},s={id:"jme3/advanced/making_the_camera_follow_a_character",title:"making_the_camera_follow_a_character",description:"When players steer a game character with 1st-person view, they directly",source:"@site/docs/jme3/advanced/making_the_camera_follow_a_character.md",permalink:"/wikidemo/docs/jme3/advanced/making_the_camera_follow_a_character",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/making_the_camera_follow_a_character.md"},c=[],l={rightToc:c};function m(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"When players steer a game character with 1st-person view, they directly\nsteer the camera (",Object(o.b)("inlineCode",{parentName:"p"},"flyCam.setEnabled(true);"),"), and they never see the\nwalking character itself. In a game with 3rd-person view, however, the\nplayers see the character walk, and you (the game developer) want to\nmake the camera follow the character around when it walks."),Object(o.b)("p",null,"There are two ways how the camera can do that:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Registering a chase camera to the player and the input manager.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Attaching the camera to the character using a camera node."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Important:")," Using third-person view requires you to deactivate the\ndefault flyCam (first-person view). This means that you have to\nconfigure your own navigation (",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"../../jme3/advanced/input_handling"}),"key inputs and\nanalogListener"),") that make your\nplayer character walk. For moving a physical player character, use\n",Object(o.b)("inlineCode",{parentName:"p"},"player.setWalkDirection()"),", for a non-physical character you can use\n",Object(o.b)("inlineCode",{parentName:"p"},"player.move()"),"."),Object(o.b)("h1",{id:"code-samples"},"Code Samples"),Object(o.b)("p",null,"Press the WASD or arrow keys to move. Drag with the left mouse button to\nrotate."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/input/TestChaseCamera.java"}),"TestChaseCamera.java"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/input/TestCameraNode.java"}),"TestCameraNode.java")))),Object(o.b)("h1",{id:"camera-node"},"Camera Node"),Object(o.b)("p",null,"To make the camera follow a target node, add this camera node code to\nyour init method (e.g. ",Object(o.b)("inlineCode",{parentName:"p"},"simpleInitApp()"),"). The ",Object(o.b)("inlineCode",{parentName:"p"},"target")," spatial is\ntypically the player node."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-java"}),'// Disable the default flyby cam\nflyCam.setEnabled(false);\n//create the camera Node\ncamNode = new CameraNode("Camera Node", cam);\n//This mode means that camera copies the movements of the target:\ncamNode.setControlDir(ControlDirection.SpatialToCamera);\n//Attach the camNode to the target:\ntarget.attachChild(camNode);\n//Move camNode, e.g. behind and above the target:\ncamNode.setLocalTranslation(new Vector3f(0, 5, -5));\n//Rotate the camNode to look at the target:\ncamNode.lookAt(target.getLocalTranslation(), Vector3f.UNIT_Y);\n')),Object(o.b)("p",null,"::: {.important}\nWhere the example says\n",Object(o.b)("inlineCode",{parentName:"p"},"camNode.setLocalTranslation(new Vector3f(0, 5, -5));"),", you have to\nsupply your own start position for the camera. This depends on the size\nof your target (the player character) and its position in your\nparticular scene. Optimally, you set this to a spot a bit behind and\nabove the target.\n:::"),Object(o.b)("p",null,"+-----------------------------------+-----------------------------------+\n| Methods                           | Description                       |\n+===================================+===================================+\n| setControlDir(                    | User input steers the target      |\n| ControlDirection.SpatialToCamera) | spatial, and the camera follows   |\n|                                   | the spatial.\\                     |\n|                                   | The spatial's transformation is   |\n|                                   | copied over the camera's          |\n|                                   | transformation.\\                  |\n|                                   | Example: Use with                 |\n|                                   | ","[CharacterControl]","(..             |\n|                                   | /../jme3/advanced/physics)led |\n|                                   | spatial.                          |\n+-----------------------------------+-----------------------------------+\n| setControlDir(                    | User input steers the camera, and |\n| ControlDirection.CameraToSpatial) | the target spatial follows the    |\n|                                   | camera.\\                          |\n|                                   | The camera's transformation is    |\n|                                   | copied over the spatial's         |\n|                                   | transformation. Use with          |\n|                                   | first-person flyCam.              |\n+-----------------------------------+-----------------------------------+"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Code sample:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/input/TestCameraNode.java"}),"TestCameraNode.java"),"\n-- Press the WASD or arrow keys to move. Drag with the left mouse\nbutton to rotate.")),Object(o.b)("h1",{id:"chase-camera"},"Chase Camera"),Object(o.b)("p",null,"To activate the chase camera, add the following code to your init method\n(e.g. ",Object(o.b)("inlineCode",{parentName:"p"},"simpleInitApp()"),"). The ",Object(o.b)("inlineCode",{parentName:"p"},"target")," spatial is typically the player\nnode. You will be able to rotate the target by dragging (keeping the\nleft mouse button pressed and moving the mouse)."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-java"}),"// Disable the default flyby cam\nflyCam.setEnabled(false);\n// Enable a chase cam for this target (typically the player).\nChaseCamera chaseCam = new ChaseCamera(cam, target, inputManager);\nchaseCam.setSmoothMotion(true);\n")),Object(o.b)("p",null,"+-----------------------------------+-----------------------------------+\n| Method                            | Description                       |\n+===================================+===================================+\n| setInvertVerticalAxis(true)       | Invert the camera's vertical      |\n|                                   | rotation Axis                     |\n+-----------------------------------+-----------------------------------+\n| setInvertHorizontalAxis(true)     | Invert the camera's horizontal    |\n|                                   | rotation Axis                     |\n+-----------------------------------+-----------------------------------+\n| setTrailingEnabled(true)          | Camera follows the target and     |\n|                                   | flies around and behind when the  |\n|                                   | target moves towards the camera.  |\n|                                   | Trailing only works with smooth   |\n|                                   | motion enabled. (Default)         |\n+-----------------------------------+-----------------------------------+\n| setTrailingEnabled(false)         | Camera follows the target, but    |\n|                                   | does not rotate around the target |\n|                                   | when the target changes           |\n|                                   | direction.                        |\n+-----------------------------------+-----------------------------------+\n| setSmoothMotion(true)             | Activate SmoothMotion when        |\n|                                   | trailing. This means the camera   |\n|                                   | seems to accelerate and fly after |\n|                                   | the character, when it has caught |\n|                                   | up, it slows down again.          |\n+-----------------------------------+-----------------------------------+\n| setSmoothMotion(false)            | Disable smooth camera motion.     |\n|                                   | Disabling SmoothMotion also       |\n|                                   | disables trailing.                |\n+-----------------------------------+-----------------------------------+\n| setLookA                          | Camera looks at a point 3 world   |\n| tOffset(Vector3f.UNIT","_","Y.mult(3)) | units above the target.           |\n+-----------------------------------+-----------------------------------+\n| setToggleRotationTrigger(new      | Enable rotation by keeping the    |\n| MouseButtonTr                     | middle mouse button pressed (like |\n| igger(MouseInput.BUTTON","_","MIDDLE)) | in Blender). This disables the    |\n|                                   | rotation on right and left mouse  |\n|                                   | button click.                     |\n+-----------------------------------+-----------------------------------+\n| setToggleRotationTrigger(new      | Activate mutiple triggers for the |\n| MouseButtonTrigger(\\              | rotation of the camera, e.g.      |\n| MouseInput.BUTTON","_","MIDDLE),\\      | spacebar and middle mouse button, |\n| new                               | etc.                              |\n| KeyTrigger(KeyInput.KEY","_","SPACE))  |                                   |\n+-----------------------------------+-----------------------------------+\n| setRotationSensitivity(5f)        | How fast the camera rotates. Use  |\n|                                   | values around \\<1.0f (all bigger  |\n|                                   | values are ignored).              |\n+-----------------------------------+-----------------------------------+"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Code sample:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/input/TestChaseCamera.java"}),"TestChaseCamera.java"),"\n-- Press the WASD or arrow keys to move. Drag with the left mouse\nbutton to rotate.")),Object(o.b)("h1",{id:"which-to-choose"},"Which to Choose?"),Object(o.b)("p",null,"What is the difference of the two code samples above?"),Object(o.b)("p",null,"+-----------------------------------+-----------------------------------+\n| CameraNode                        | ChaseCam                          |\n+===================================+===================================+\n| Camera follows immediately, flies | Camera moves smoothly and         |\n| at same speed as target.          | accelerates and decelerates,      |\n|                                   | flies more slowly than the target |\n|                                   | and catches up.                   |\n+-----------------------------------+-----------------------------------+\n| Camera stays attached to the      | Camera orbits the target and      |\n| target at a constant distance.    | approaches slowly.                |\n+-----------------------------------+-----------------------------------+\n| Drag-to-Rotate rotates the target | Drag-to-Rotate rotates only the   |\n| and the camera. You always see    | camera. You can see the target    |\n| the target from behind.           | from various sides.               |\n+-----------------------------------+-----------------------------------+"))}m.isMDXComponent=!0},441:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return u}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),m=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s({},t,{},e)),a},h=function(e){var t=m(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),h=m(a),b=n,u=h["".concat(i,".").concat(b)]||h[b]||p[b]||o;return a?r.a.createElement(u,s({ref:t},l,{components:a})):r.a.createElement(u,s({ref:t},l))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var l=2;l<o;l++)i[l]=a[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);