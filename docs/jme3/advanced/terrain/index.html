<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="/js/dark_default.js"></script>

<title data-react-helmet="true">terrain | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="terrain | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/terrain">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemo/img/favicon.ico">


<link rel="stylesheet" href="/wikidemo/styles.7d008dc0.css">


<link rel="preload" href="/wikidemo/styles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemo/runtime~main.0f38d2b7.js" as="script">

<link rel="preload" href="/wikidemo/main.1b6aa70f.js" as="script">

<link rel="preload" href="/wikidemo/1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo/2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo/302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo/394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo/17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo/8a1eb053.ce1c655c.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">terrain</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="overview"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#overview" title="Direct link to heading">#</a>Overview</h1><p>TerraMonkey is a GeoMipMapping quad tree of terrain tiles that supports
real time editing and texture splatting. That&#x27;s a mouth full! Lets look
at each part:</p><ul><li><p><strong>GeoMipMapping:</strong> a method of changing the level of detail (LOD) of
geometry tiles based on how far away they are from the camera.
Between the edges of two tiles, it will seam those edges together so
you don&#x27;t get gaps or holes. For an in-depth read on how it works,
read <a href="http://www.flipcode.com/archives/article_geomipmaps.pdf">Fast Terrain Rendering Using Geometrical
MipMapping</a>.</p></li><li><p><strong>Quad Tree:</strong> The entire terrain structure is made up of
TerrainPatches (these hold the actual meshes) as leaves in a quad
tree (TerrainQuad). TerrainQuads are subdivided by 4 until they
reach minimum size, then a TerrainPatch is created, and that is
where the actual geometry mesh lives. This allows for fast culling
of the terrain that you can&#x27;t see.</p></li><li><p><strong>Splatting:</strong> The ability to paint multiple textures onto your
terrain. What differs here from JME2 is that this is all done in a
shader, no more render passes. So it performs much faster.</p></li><li><p><strong>Real-time editing:</strong> <a href="/wikidemo/docs/sdk/terrain_editor">TerraMonkey terrains are editable in
jMonkeyEngine SDK</a>, and you are able
to modify them in real time, for example by raising and lowering the
terrain.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="current-features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#current-features" title="Direct link to heading">#</a>Current Features:</h2><ul><li><p>Support for 16 splat textures. You use a custom combination of
Diffuse, Normal, Specular, and Glow Maps.</p></li><li><p>GeoMipMapping: LodControl optimizes the level of detail</p></li><li><p>Terrain can be randomized or generated from a heightmap</p></li><li><p>jMonkeyEngine SDK terrain editor</p></li><li><p>Streaming <a href="/wikidemo/docs/jme3/advanced/endless_terraingrid">terrain
grid</a> (i.e. infinite
terrain)</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="planned-features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#planned-features" title="Direct link to heading">#</a>Planned Features:</h2><ul><li><p>Hydraulic erosion and procedural texture generation</p></li><li><p>Holes: caves, cliffs</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sample-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sample-code" title="Direct link to heading">#</a>Sample Code</h1><ul><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainTest.java">TerrainTest.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainTestAdvanced.java">TerrainTestAdvanced.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainTestCollision.java">TerrainTestCollision.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainTestModifyHeight.java">TerrainTestModifyHeight.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/terrain/TerrainTestReadWrite.java">TerrainTestReadWrite.java</a></p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="geo-mip-mapping"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#geo-mip-mapping" title="Direct link to heading">#</a>Geo Mip Mapping</h1><p><img src="/images/jme3/advanced/terrain-lod-high-medium-low.png" alt="The wiremesh of a terrain with visible differences in levels of detail
(LOD)"></p><p>You have seen GeoMipMapping implemented in games before. This is where
the farther away terrain has fewer polygons, and as you move closer,
more polygons fill in. The whole terrain is divided into a grid of
patches, and each one has its own level of detail (LOD). The
GeoMipMapping algorithm looks at each patch, and its neighbours, to
determine how to render the geometry. It will seam the edges between two
patches with different LOD.</p><p>GeoMipMapping often leads to &quot;popping where you see the terrain switch
from one LOD to another. TerraMonkey has been designed so you can swap
out different LOD calculation algorithms based on what will look best
for your game. You can do this with the LodCalculator interface.</p><p>GeoMipMapping in TerraMonkey has been split into several parts: the
terrain quad tree, and the LODGeomap. The geomap deals with the actual
LOD and seaming algorithm. So if you want a different data structure for
your terrain system, you can re-use this piece of code. The quad tree
(TerrainQuad and TerrainPatch) provide a means to organize the
LODGeomaps, notify them of their neighbour&#x27;s LOD change, and to update
the geometry when the LOD does change. To change the LOD it does this by
changing the index buffer of the triangle strip, so the whole geometry
doesn&#x27;t have to be re-loaded onto the video card. If you are eager for
more detail on how GeoMipMapping works read: <a href="http://www.flipcode.com/archives/article_geomipmaps.pdf">Fast Terrain Rendering
Using Geometrical
MipMapping</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="terrain-quad-tree"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#terrain-quad-tree" title="Direct link to heading">#</a>Terrain Quad Tree</h1><p>TerraMonkey is a quad tree. Each node is a TerrainQuad, and each leaf is
a TerrainPatch. A TerrainQuad has either 4 child TerrainQuads, or 4
child TerrainPatches. The TerrainPatch holds the actual mesh geometry.
This structure is almost exactly the same as JME2&#x27;s TerrainPage system.
Except now each leaf has a reference to its neighbours, so it doesn&#x27;t
ever have to traverse the tree to get them.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="texture-splatting"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#texture-splatting" title="Direct link to heading">#</a>Texture Splatting</h1><p>When you &quot;slap&quot; a texture on a mesh, the whole mesh looks the same. For
big meshes (such as terrains) that is undesirable because it looks very
boring (your whole landscape would be all rock, or all grass, or all
sand). Texture Splatting is a technique that lets you &quot;paint several
textures into one combined texure. Each of the splat textures has an
opacity value so you can define where it is visible in the final overall
texture.</p><p>The default material for TerraMonkey is TerrainLighting.j3md. This
material combines several texture maps to produce the final custom
texture. Remember, Diffuse Maps are the main textures that define the
look; optionally, each Diffuse Map can be enhanced with a Normal Map;
Alpha Maps describe the opacity of each Diffuse Map used (one color
--red, green, blue, or alpha-- stands for one Diffuse Map&#x27;s opacity);
Glow and Specular Maps define optional effects.</p><p>::: {.important}
We recommend to <a href="/wikidemo/docs/sdk/terrain_editor">create and edit Splat Textures for terrains visually in
the jMonkeyEngine SDK</a>, and not do it
manually. If you are simply curious about how the SDK&#x27;s terrain texture
plugin works, or if you indeed want to generate materials manually, then
read on for the implementation details.
:::</p><p>Here are the names of TerrainLighting.j3md&#x27;s material properties:</p><p><img src="/images/jme3/beginner/mountains512.png" alt="A heightmap encodes the topological highs and lows of the
terrain"></p><ul><li><p>1-3 Alpha Maps</p><ul><li><p><code>AlphaMap</code></p></li><li><p><code>AlphaMap_1</code></p></li><li><p><code>AlphaMap_2</code></p></li></ul></li><li><p>12 Diffuse and/or Normal Maps (either in 6 pairs, or 12 stand-alone
Diffuse Maps)</p><ul><li><p><code>DiffuseMap</code>, <code>DiffuseMap_0_scale</code>, <code>NormalMap</code></p></li><li><p><code>DiffuseMap_1</code>, <code>DiffuseMap_1_scale</code>, <code>NormalMap_1</code></p></li><li><p><code>DiffuseMap_2</code>, <code>DiffuseMap_2_scale</code>, <code>NormalMap_2</code></p></li><li><p><code>DiffuseMap_3</code>, <code>DiffuseMap_3_scale</code>, <code>NormalMap_3</code></p></li></ul></li></ul><p><img src="/images/jme3/beginner/alphamap.png" alt="An alpha map can describe where 4 textures are painted onto the
terrain."></p><ul><li><p><code>DiffuseMap_4</code>, <code>DiffuseMap_4_scale</code>, <code>NormalMap_4</code></p></li><li><p>...</p></li><li><p><code>DiffuseMap_11</code>, <code>DiffuseMap_11_scale</code>, <code>NormalMap_11</code></p><ul><li>Light maps</li></ul></li><li><p><code>GlowMap</code></p></li><li><p><code>SpecularMap</code></p></li></ul><p>::: {.note}
<code>DiffuseMap_0_scale</code> is a float value (e.g. 1.0f); you must specify one
scale per Diffuse Map.
:::</p><p>OpenGL supports a maximum of 16 <em>samplers</em> in any given shader. This
means you can only use a subset of material properties at the same time
if you use the terrain&#x27;s default lighting shader (TerrainLighting.j3md)!</p><p>Adhere to the following constraints:</p><p><img src="/images/jme3/beginner/road.jpg" alt="The Diffuse Map of one of the terrain textures depicts the colors of a
paved surface"></p><ul><li><p>1-12 Diffuse Maps. One Diffuse Map is the minimum!</p></li><li><p>1-3 Alpha Maps. For each 4 Diffuse Maps, you need 1 more Alpha Map!</p></li><li><p>0-6 Normal Maps. Diffuse Maps &amp; Normal Maps always come in pairs!</p></li><li><p>0 or 1 Glow Map</p></li><li><p>0 or 1 Specular Map.</p></li><li><p><strong>The sum of all textures used must be 16, or less.</strong></p></li></ul><p>Here are some common examples what this means:</p><p><img src="/images/jme3/beginner/road_normal.png" alt="The Normal Map of one of the terrain textures depicts the bumpiness of
a paved surface"></p><ul><li><p>3 Alpha + 11 Diffuse + 1 Normal.</p></li><li><p>3 Alpha + 11 Diffuse + 1 Glow.</p></li><li><p>3 Alpha + 11 Diffuse + 1 Specular.</p></li><li><p>3 Alpha + 10 Diffuse + 3 Normal.</p></li><li><p>3 Alpha + 10 Diffuse + 1 Normal + 1 Glow + 1 Specular.</p></li><li><p>2 Alpha + 8 Diffuse + 6 Normal.</p></li><li><p>2 Alpha + 6 Diffuse + 6 Normal + 1 Glow + 1 Specular.</p></li><li><p>1 Alpha + 3 Diffuse + 3 Normal + 1 Glow + 1 Specular (rest unused)</p></li></ul><p>You can hand-paint Alpha, Diffuse, Glow, and Specular maps in a drawing
program, like Photoshop. Define each splat texture in the Alpha Map in
either Red, Green, Blue, or Alpha (=RGBA). The JmeTests project bundled
in the <a href="/wikidemo/docs/sdk">SDK</a> includes some image files that show you how
this works. The example images show a terrain heightmap next to its
Alpha Map (which has been prepare for 3 Diffuse Maps), and one examplary
Diffuse/Normal Map pair.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="code-sample-terrainj3md"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-sample-terrainj3md" title="Direct link to heading">#</a>Code Sample: Terrain.j3md</h1><p>This example shows the simpler material definition <code>Terrain.j3md</code>, which
only supports 1 Alpha Map, 3 Diffuse Maps, 3 Normal Maps, and does not
support Phong illumination. It makes the exmaple shorter --
TerrainLighting.j3md works accordingly (The list of material properties
see above. Links to extended sample code see above.)</p><p>First, we load our textures and the heightmap texture for the terrain</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Create material from Terrain Material Definition</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Material</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Common/MatDefs/Terrain/Terrain.j3md&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Load alpha map (for splat textures)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Alpha&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Textures/Terrain/splat/alphamap.png&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load heightmap image (for the terrain heightmap)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Texture</span><span class="token plain"> heightMapImage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Textures/Terrain/splat/mountains512.png&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load grass texture</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Texture</span><span class="token plain"> grass </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Textures/Terrain/splat/grass.jpg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">grass</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setWrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WrapMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Repeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> grass</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFloat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex1Scale&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">64f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load dirt texture</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Texture</span><span class="token plain"> dirt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Textures/Terrain/splat/dirt.jpg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">dirt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setWrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WrapMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Repeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dirt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFloat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex2Scale&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// load rock texture</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Texture</span><span class="token plain"> rock </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Textures/Terrain/splat/road.jpg&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setWrap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WrapMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Repeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setTexture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFloat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Tex3Scale&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>We create the heightmap from the <code>heightMapImage</code>.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">AbstractHeightMap</span><span class="token plain"> heightmap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">heightmap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ImageBasedHeightMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">heightMapImage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getImage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">heightmap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Next we create the actual terrain.</p><ul><li><p>The terrain tiles are 65x65.</p></li><li><p>The total size of the terrain is 513x513, but it can easily be up to
1025x1025.</p></li><li><p>It uses the heightmap to generate the height values.</p></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">terrain </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TerrainQuad</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;terrain&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">513</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> heightmap</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHeightMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">terrain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setMaterial</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">matRock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">terrain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLocalScale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// scale to make it less steep</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">List</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">Camera</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> cameras </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ArrayList</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">cameras</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">getCamera</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">TerrainLodControl</span><span class="token plain"> control </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">TerrainLodControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">terrain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cameras</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">terrain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">control</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">attachChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">terrain</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>As an alternative to an image-based height map, you can also generate a
Hill hightmap:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">heightmap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HillHeightMap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1025</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/terrain.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#current-features" class="contents__link">Current Features:</a></li><li><a href="#planned-features" class="contents__link">Planned Features:</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemo/styles.08ff7081.js"></script>

<script src="/wikidemo/runtime~main.0f38d2b7.js"></script>

<script src="/wikidemo/main.1b6aa70f.js"></script>

<script src="/wikidemo/1.e501629b.js"></script>

<script src="/wikidemo/2.c824d386.js"></script>

<script src="/wikidemo/302.1d1a2997.js"></script>

<script src="/wikidemo/394d525a.30c299b8.js"></script>

<script src="/wikidemo/17896441.d065d5f5.js"></script>

<script src="/wikidemo/8a1eb053.ce1c655c.js"></script>


</body>
</html>