<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="/js/dark_default.js"></script>

<title data-react-helmet="true">animation | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="animation | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="In 3D games, you do not only load static 3D models, you also want to be"><meta data-react-helmet="true" property="og:description" content="In 3D games, you do not only load static 3D models, you also want to be"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/animation">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemoimg/favicon.ico">


<link rel="stylesheet" href="/wikidemostyles.7d008dc0.css">


<link rel="preload" href="/wikidemostyles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemoruntime~main.aab3cf1b.js" as="script">

<link rel="preload" href="/wikidemomain.53cb7c94.js" as="script">

<link rel="preload" href="/wikidemo1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo3b23509d.43f90ba0.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo"><img class="navbar__logo" src="/wikidemoimg/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/wikidemodocs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo"><img class="navbar__logo" src="/wikidemoimg/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wikidemodocs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">animation</h1></header><div class="markdown"><p>In 3D games, you do not only load static 3D models, you also want to be
able to trigger animations in the model from the Java code.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="requirements"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#requirements" title="Direct link to heading">#</a>Requirements</h1><p>JME3 only loads and plays animated models, it does not create them.</p><p>What is required for an animated model? (<a href="../../jme3/terminology.xml#Animation">See also: Animation
terminology</a>)</p><ol><li><p>For each model, you have to segment the model into a skeleton
(<strong>bone rigging</strong>).</p></li><li><p>For each motion, you have to specify how the animation distorts
parts of the model (<strong>skinning</strong>).</p></li><li><p>For each animation, you have to specify a series of snapshots of how
the bones are positioned (<strong>keyframes</strong>).</p></li><li><p>One model can contain several animations. You give every animation a
name when you save it in the mesh editor.</p></li></ol><p>Unless you download free models, or buy them from a 3D artist, you must
create your animated models in an <strong>external mesh editor</strong> (for example,
Blender) yourself.</p><ul><li><p><a href="../../jme3/features.xml#supported-external-file-types">Supported External File
Types</a></p></li><li><p><a href="/wikidemo/docs/jme3/external/blender">Creating assets in Blender3D</a></p></li><li><p><a href="http://www.youtube.com/watch?v=IDHMWsu_PqA">Video: Creating Worlds with Instances in
Blender</a></p></li></ul><p>What is required in your JME3-based Java class?</p><ul><li><p>One Animation Control per animated model.</p></li><li><p>As many Animation Channels per Control as you need to play your
animations. In simple cases one channel is enough, sometimes you
need two or more Channels per model to play gestures and motions in
parallel.</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="code-samples"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#code-samples" title="Direct link to heading">#</a>Code Samples</h1><ul><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestSpatialAnim.java">TestSpatialAnim.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestBlenderAnim.java">TestBlenderAnim.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestBlenderObjectAnim.java">TestBlenderObjectAnim.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestOgreAnim.java">TestOgreAnim.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestOgreComplexAnim.java">TestOgreComplexAnim.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/model/anim/TestCustomAnim.java">TestCustomAnim.java</a></p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="controlling-animations"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#controlling-animations" title="Direct link to heading">#</a>Controlling Animations</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-animation-control"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-animation-control" title="Direct link to heading">#</a>The Animation Control</h2><p>Create one <code>com.jme3.animation.AnimControl</code> object in your JME3
application for each animated model that you want to control. You have
to register each animated model to one of these Animation Controls. The
control object gives you access to the available animation sequences in
the model.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AnimControl</span><span class="token plain"> playerControl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// you need one Control per model</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">Node</span><span class="token plain"> player </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Models/Oto/Oto.mesh.xml&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// load a model</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  playerControl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AnimControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// get control over this model</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  playerControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// add listener</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="animation-channels"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#animation-channels" title="Direct link to heading">#</a>Animation Channels</h2><p>An Animation Control has several Animation Channels
(<code>com.jme3.animation.AnimChannel</code>). Each channel can play one animation
sequence at a time.</p><p>There often are situations where you want to run several animation
sequences at the same time, e.g. &quot;shooting&quot; while walking or &quot;boxing&quot;
while jumping. In this case, you create several channels, assign an
animation to each, and play them in parallel.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AnimChannel</span><span class="token plain"> channel_walk </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playerControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">AnimChannel</span><span class="token plain"> channel_jump </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> playerControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createChannel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span></div></div></div></div></div><p>To reset a Control, call <code>control.clearChannels()</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="skeleton-control"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#skeleton-control" title="Direct link to heading">#</a>Skeleton Control</h2><p>The Skeleton control deforms a model according to a skeleton. Use it to
attach other geometries to your model such as clothing, weapons,
accessories or a particle emitter effect. You access the control the
same way as you would the AnimControl.</p><p><strong>Control resides in the main node of your model.</strong></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">SkeletonControl</span><span class="token plain"> skeletonControl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">skeletonControl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SkeletonControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p><strong>Control rsides somewhere other than main node.</strong></p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">depthFirstTraversal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SceneGraphVisitorAdapter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">visit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Node</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SkeletonControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            skeletonControl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SkeletonControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="animation-control-properties"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#animation-control-properties" title="Direct link to heading">#</a>Animation Control Properties</h1><p>The following information is available for an AnimControl.</p><p>+-----------------------------------+-----------------------------------+
| AnimControl Property              | Usage                             |
+===================================+===================================+
| createChannel()                   | Returns a new channel,            |
|                                   | controlling all bones by default. |
+-----------------------------------+-----------------------------------+
| getNumChannels()                  | The number of channels registered |
|                                   | to this Control.                  |
+-----------------------------------+-----------------------------------+
| getChannel(0)                     | Gets individual channels by index |
|                                   | number. At most                   |
|                                   | <code>getNumChannels()</code>.               |
+-----------------------------------+-----------------------------------+
| clearChannels()                   | Clear all channels in this        |
|                                   | control.                          |
+-----------------------------------+-----------------------------------+
| addListener(animEventListener)\   | Adds or removes listeners to      |
| r                                 | receive animation related events. |
| emoveListener(animEventListener)\ |                                   |
| clearListeners()                  |                                   |
+-----------------------------------+-----------------------------------+</p><p>+-----------------------------------+-----------------------------------+
| AnimControl Property              | Usage                             |
+===================================+===================================+
| setAnimations(aniHashMap)         | Sets the animations that this     |
|                                   | AnimControl is capable of         |
|                                   | playing. The animations must be   |
|                                   | compatible with the skeleton      |
|                                   | given in the constructor.         |
+-----------------------------------+-----------------------------------+
| addAnim(boneAnim)\                | Adds or removes an animation from |
| removeAnim(boneAnim)              | this Control.                     |
+-----------------------------------+-----------------------------------+
| getAnimationNames()               | A String Collection of names of   |
|                                   | all animations that this Control  |
|                                   | can play for this model.          |
+-----------------------------------+-----------------------------------+
| getAnim(&quot;anim&quot;)                   | Retrieve an animation from the    |
|                                   | list of animations.               |
+-----------------------------------+-----------------------------------+
| getAnimationLength(&quot;anim&quot;)        | Returns the length of the given   |
|                                   | named animation in seconds        |
+-----------------------------------+-----------------------------------+</p><p>+-----------------------------------+-----------------------------------+
| AnimControl Property              | Usage                             |
+===================================+===================================+
| getSkeleton()                     | The Skeleton object controlled by |
|                                   | this Control.                     |
+-----------------------------------+-----------------------------------+</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="skeleton-control-properties"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#skeleton-control-properties" title="Direct link to heading">#</a>Skeleton Control Properties</h1><p>The following information is available for an SkeletonControl.</p><p>+-----------------------------------+-----------------------------------+
| SkeletonControl Property          | Usage                             |
+===================================+===================================+
| getSkeleton()                     | The Skeleton object controlled by |
|                                   | this Control.                     |
+-----------------------------------+-----------------------------------+
| getTargets()                      | The Skin objects controlled by    |
|                                   | this Control, as Mesh array.      |
+-----------------------------------+-----------------------------------+
| getAttachmentsNode(&quot;bone&quot;)        | Returns the attachment node of a  |
|                                   | bone. Attach models and effects   |
|                                   | to this node to make them follow  |
|                                   | this bone&#x27;s motions.              |
+-----------------------------------+-----------------------------------+</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="animation-channel-properties"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#animation-channel-properties" title="Direct link to heading">#</a>Animation Channel Properties</h1><p>The following properties are set per AnimChannel.</p><p>+-----------------------------------+-----------------------------------+
| AnimChannel Property              | Usage                             |
+===================================+===================================+
| setLoopMode(LoopMode.Loop);       | From now on, the animation on     |
|                                   | this channel will repeat from the |
|                                   | beginning when it ends.           |
+-----------------------------------+-----------------------------------+
| setLoopMode(LoopMode.DontLoop);   | From now on, the animation on     |
|                                   | this channel will play once, and  |
|                                   | the freeze at the last keyframe.  |
+-----------------------------------+-----------------------------------+
| setLoopMode(LoopMode.Cycle);      | From now on, the animation on     |
|                                   | this channel will play forward,   |
|                                   | then backward, then again         |
|                                   | forward, and so on.               |
+-----------------------------------+-----------------------------------+
| setSpeed(1f);                     | From now on, play this animation  |
|                                   | slower (\&lt;1f) or faster (&gt;1f),   |
|                                   | or with default speed (1f).       |
+-----------------------------------+-----------------------------------+
| setTime(1.3f);                    | Fast-forward or rewind to a       |
|                                   | certain moment in time of this    |
|                                   | animation.                        |
+-----------------------------------+-----------------------------------+</p><p>The following information is available for a channel.</p><p>+-----------------------------------+-----------------------------------+
| AnimChannel Property              | Usage                             |
+===================================+===================================+
| getAnimationName()                | The name of the animation playing |
|                                   | on this channel. Returns <code>null</code>   |
|                                   | when no animation is playing.     |
+-----------------------------------+-----------------------------------+
| getLoopMode()                     | The current loop mode on this     |
|                                   | channel. The returned             |
|                                   | com.jme3.animation enum can be    |
|                                   | LoopMode.Loop, LoopMode.DontLoop, |
|                                   | or LoopMode.Cycle.                |
+-----------------------------------+-----------------------------------+
| getAnimMaxTime()                  | The total length of the animation |
|                                   | on this channel. Or <code>0f</code> if       |
|                                   | nothing is playing.               |
+-----------------------------------+-----------------------------------+
| getTime()                         | How long the animation on this    |
|                                   | channel has been playing. It      |
|                                   | returns <code>0f</code> if the channel has   |
|                                   | not started playing yet, or a     |
|                                   | value up to getAnimMaxTime().     |
+-----------------------------------+-----------------------------------+
| getControl()                      | The AnimControl that belongs to   |
|                                   | this AnimChannel.                 |
+-----------------------------------+-----------------------------------+</p><p>Use the following methods to add or remove individual bones to an
AnimChannel. This is useful when you play two animations in parallel on
two channels, and each controls a subset of the bones (e.g. one the
arms, and the other the legs).</p><p>+-----------------------------------+-----------------------------------+
| AnimChannel Methods               | Usage                             |
+===================================+===================================+
| addAllBones()                     | Add all the bones of the model&#x27;s  |
|                                   | skeleton to be influenced by this |
|                                   | animation channel. (default)      |
+-----------------------------------+-----------------------------------+
| addBone(&quot;bone1&quot;)\                 | Add a single bone to be           |
| addBone(bone1)                    | influenced by this animation      |
|                                   | channel.                          |
+-----------------------------------+-----------------------------------+
| addToRootBone(&quot;bone1&quot;)\           | Add a series of bones to be       |
| addToRootBone(bone1)              | influenced by this animation      |
|                                   | channel: Add all bones, starting  |
|                                   | from the given bone, to the root  |
|                                   | bone.                             |
+-----------------------------------+-----------------------------------+
| addFromRootBone(&quot;bone1&quot;)\         | Add a series of bones to be       |
| addFromRootBone(bone1)            | influenced by this animation      |
|                                   | channel: Add all bones, starting  |
|                                   | from the given root bone, going   |
|                                   | towards the children bones.       |
+-----------------------------------+-----------------------------------+</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="playing-animations"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#playing-animations" title="Direct link to heading">#</a>Playing Animations</h1><p>Animations are played by channel.</p><p>::: {.note}
Whether the animation channel plays continuously or only once, depends
on the Loop properties you have set.
:::</p><p>+-----------------------------------+-----------------------------------+
| Channel Method                    | Usage                             |
+===================================+===================================+
| cha                               | Start the animation named &quot;Walk&quot;  |
| nnel_walk.setAnim(&quot;Walk&quot;,0.50f); | on channel channel_walk.\        |
|                                   | The float value specifies the     |
|                                   | time how long the animation       |
|                                   | should overlap with the previous  |
|                                   | one on this channel. If set to    |
|                                   | 0f, then no blending will occur   |
|                                   | and the new animation will be     |
|                                   | applied instantly.                |
+-----------------------------------+-----------------------------------+</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Use the AnimEventLister below to react at the end or start of an
animation cycle.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="usage-example"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage-example" title="Direct link to heading">#</a>Usage Example</h2><p>In this short example, we define the space key to trigger playing the
&quot;Walk&quot; animation on channel2.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">simpleInitApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    inputManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">KeyTrigger</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">KeyInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">KEY_SPACE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    inputManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">actionListener</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">ActionListener</span><span class="token plain"> actionListener </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ActionListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> keyPressed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> tpf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">keyPressed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">channel2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAnimationName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          channel2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLoopMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LoopMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Loop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          channel2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAnim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.50f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="animation-event-listener"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#animation-event-listener" title="Direct link to heading">#</a>Animation Event Listener</h1><p>A jME3 application that contains animations can implement the
<code>com.jme3.animation.AnimEventListener</code> interface.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">HelloAnimation</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">SimpleApplication</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                     </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">AnimEventListener</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>This optional Listener enables you to respond to animation start and end
events, <code>onAnimChange()</code> and <code>onAnimCycleDone()</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="responding-to-animation-end"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#responding-to-animation-end" title="Direct link to heading">#</a>Responding to Animation End</h2><p>The <code>onAnimCycleDone()</code> event is invoked when an animation cycle has
ended. For non-looping animations, this event is invoked when the
animation is finished playing. For looping animations, this event is
invoked each time the animation loop is restarted.</p><p>You have access to the following objects:</p><ul><li><p>The Control to which the listener is assigned.</p></li><li><p>The animation channel being played.</p></li><li><p>The name of the animation that has just finished playing.</p></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAnimCycleDone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AnimControl</span><span class="token plain"> control</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">AnimChannel</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> animName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// test for a condition you are interested in, e.g. ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">animName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// respond to the event here, e.g. ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      channel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAnim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Stand&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.50f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="responding-to-animation-start"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#responding-to-animation-start" title="Direct link to heading">#</a>Responding to Animation Start</h2><p>The <code>onAnimChange()</code> event is invoked every time before an animation is
set by the user to be played on a given channel (<code>channel.setAnim()</code>).</p><p>You have access to the following objects:</p><ul><li><p>The Control to which the listener is assigned.</p></li><li><p>The animation channel being played.</p></li><li><p>The name of the animation that will start playing.</p></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAnimChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">AnimControl</span><span class="token plain"> control</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">AnimChannel</span><span class="token plain"> channel</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> animName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// test for a condition you are interested in, e.g. ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">animName</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Walk&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// respond to the event here, e.g. ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      channel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAnim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Reset&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.50f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/animation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#the-animation-control" class="contents__link">The Animation Control</a></li><li><a href="#animation-channels" class="contents__link">Animation Channels</a></li><li><a href="#skeleton-control" class="contents__link">Skeleton Control</a></li><li><a href="#usage-example" class="contents__link">Usage Example</a></li><li><a href="#responding-to-animation-end" class="contents__link">Responding to Animation End</a></li><li><a href="#responding-to-animation-start" class="contents__link">Responding to Animation Start</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright  2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemostyles.08ff7081.js"></script>

<script src="/wikidemoruntime~main.aab3cf1b.js"></script>

<script src="/wikidemomain.53cb7c94.js"></script>

<script src="/wikidemo1.e501629b.js"></script>

<script src="/wikidemo2.c824d386.js"></script>

<script src="/wikidemo302.1d1a2997.js"></script>

<script src="/wikidemo394d525a.30c299b8.js"></script>

<script src="/wikidemo17896441.d065d5f5.js"></script>

<script src="/wikidemo3b23509d.43f90ba0.js"></script>


</body>
</html>