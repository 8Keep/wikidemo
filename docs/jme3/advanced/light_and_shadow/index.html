<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="./js/dark_default.js"></script>

<title data-react-helmet="true">light_and_shadow | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="light_and_shadow | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="![Examples of shading and"><meta data-react-helmet="true" property="og:description" content="![Examples of shading and"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/light_and_shadow">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemo/img/favicon.ico">


<link rel="stylesheet" href="/wikidemo/styles.7d008dc0.css">


<link rel="preload" href="/wikidemo/styles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemo/runtime~main.7418f8ca.js" as="script">

<link rel="preload" href="/wikidemo/main.0c3323ac.js" as="script">

<link rel="preload" href="/wikidemo/1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo/2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo/302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo/394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo/17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo/587f0361.95004371.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">light_and_shadow</h1></header><div class="markdown"><p><img src="../../jme3/advanced/shading-ani.gif" alt="Examples of shading and
lighting."></p><p>Light and Shadow are two separate things in 3D engines, although we
percieve them together in real life:</p><ul><li><p>Lighting means that an object is brighter on the side facing the
light direction, and darker on the backside. Computationally, this
is relatively easy.</p></li><li><p>Lighting does not mean that objects cast a shadow on the floor or
other objects: Activating shadow processing is an additional step
described here. Since casting shadows has an impact on performance,
drop shadows and ambient occlusion shading are not activated by
default.</p></li></ul><p>::: {.important}
A light source with a direction or location is required for all
Geometries with Lighting.j3md-based Materials. An ambient light is not
sufficient. In a scene with no appropriate light sources, Geometries
with Lighting.j3md-based Materials do not render. Only Geometries with
Unshaded.j3md-based Materials are visible independent of any light
sources.
:::</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="light-sources-and-colors"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#light-sources-and-colors" title="Direct link to heading">#</a>Light Sources and Colors</h1><p><img src="/images/jme3/advanced/light-sources.png" alt="A lit scene with multiple light
sources"></p><p>You can add several types of light sources to a scene using
<code>rootNode.addLight(mylight)</code>.</p><p>The available light sources in <code>com.​jme3.​light</code> are:</p><ul><li><p>SpotLight</p></li><li><p>PointLight</p></li><li><p>AmbientLight</p></li><li><p>DirectionalLight</p></li></ul><p>You control the color and intensity of each light source. Typically you
set the color to white (<code>new ColorRGBA(1.0f,1.0f,1.0f,1.0f)</code> or
<code>ColorRGBA.White</code>), which makes all scene elements appear in their
natural color.</p><p>You can choose to use lights in other colors than white, or darker
colors. This influences the scene&#x27;s atmosphere and will make the scene
appear colder (e.g. <code>ColorRGBA.Cyan</code>) or warmer (<code>ColorRGBA.Yellow</code>),
brighter (higher values) or darker (lower values).</p><p>You can get a list of all lights added to a Spatial by calling
<code>getWorldLightList()</code> (includes inherited lights) or
<code>getLocalLightList()</code> (only directly added lights), and iterating over
the result.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pointlight"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pointlight" title="Direct link to heading">#</a>PointLight</h2><p>An elephant model illuminated by pointlights</p><p>A PointLight has a location and shines from there in all directions as
far as its radius reaches. The light intensity decreases with increased
distance from the light source. A PointLight can be used to cast shadows
along with a PointLightShadowRenderer (see the Casting Shadows section)</p><p><strong>Typical example:</strong> Lamp, lightbulb, torch, candle.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">PointLight</span><span class="token plain"> lamp_light </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PointLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">lamp_light</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ColorRGBA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Yellow</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">lamp_light</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setRadius</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">lamp_light</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setPosition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vector3f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lamp_geo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLocalTranslation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lamp_light</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="directionallight"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#directionallight" title="Direct link to heading">#</a>DirectionalLight</h2><p>A house model illuminated with a sun-like directional light</p><p>A DirectionalLight has no position, only a direction. It sends out
parallel beams of light and is considered &quot;infinitely far away. You
typically have one directional light per scene. A DirectionalLight can
be used together with shadows.</p><p><strong>Typically example:</strong> Sun light.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">DirectionalLight</span><span class="token plain"> sun </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DirectionalLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ColorRGBA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">White</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDirection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vector3f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">.5f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">.5f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">.5f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">normalizeLocal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="spotlight"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#spotlight" title="Direct link to heading">#</a>SpotLight</h2><p>Spotlight</p><p>A SpotLight sends out a distinct beam or cone of light. A SpotLight has
a direction, a position, distance (range) and two angles. The inner
angle is the central maximum of the light cone, the outer angle the edge
of the light cone. Everything outside the light cone&#x27;s angles is not
affected by the light.</p><p><strong>Typical Example:</strong> Flashlight</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">SpotLight</span><span class="token plain"> spot </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SpotLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSpotRange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic">// distance</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSpotInnerAngle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">15f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token class-name">FastMath</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DEG_TO_RAD</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// inner light cone (central beam)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSpotOuterAngle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">35f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token class-name">FastMath</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DEG_TO_RAD</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// outer light cone (edge of the light)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ColorRGBA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">White</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.3f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// light color</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setPosition</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getLocation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// shine from camera loc</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDirection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDirection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// shine forward from camera loc</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spot</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>If you want the spotlight to follow the flycam, repeat the
setDirection(...) and setPosition(...) calls in the update loop, and kee
syncing them with the camera position and direction.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ambientlight"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ambientlight" title="Direct link to heading">#</a>AmbientLight</h2><p>An AmbientLight simply influences the brightness and color of the scene
globally. It has no direction and no location and shines equally
everywhere. An AmbientLight does not cast any shadows, and it lights all
sides of Geometries evenly, which makes 3D objects look unnaturally
flat; this is why you typically do not use an AmbientLight alone without
one of the other lights.</p><p><strong>Typical example:</strong> Regulate overall brightness, tinge the whole scene
in a warm or cold color.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">AmbientLight</span><span class="token plain"> al </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AmbientLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">al</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ColorRGBA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">White</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mult</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1.3f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">al</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You can increase the brightness of a light source gradually by
multiplying the light color to values greater than 1.0f.\
Example: <code>mylight.setColor(ColorRGBA.White.mult(1.3f));</code></p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="light-follows-spatial"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#light-follows-spatial" title="Direct link to heading">#</a>Light Follows Spatial</h1><p>You can use a <code>com.jme3.scene.control.LightControl</code> to make a SpotLight
or PointLight follow a Spatial. This can be used for a flashlight being
carried by a character, or for car headlights, or an aircraft&#x27;s
spotlight, etc.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">PointLight</span><span class="token plain"> myLight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">PointLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myLight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">LightControl</span><span class="token plain"> lightControl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LightControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myLight</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">spatial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lightControl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this spatial controls the position of this light.</span></div></div></div></div></div><p>Obviously, this does not apply to AmbientLights, which have no position.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="casting-shadows"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#casting-shadows" title="Direct link to heading">#</a>Casting Shadows</h1><p>For each type of non-ambient light source, JME3 implements two ways to
simulate geometries casting shadows on other geometries:</p><ul><li><p>a shadow renderer (which you apply to a viewport) and</p></li><li><p>a shadow filter (which you can add to a viewport&#x27;s filter
post-processor).</p></li></ul><p>+----------------------+----------------------+-----------------------+
| light source class   | shadow renderer      | shadow filter class   |
|                      | class                |                       |
+======================+======================+=======================+
| DirectionalLight     | Directiona           | Directi               |
|                      | lLightShadowRenderer | onalLightShadowFilter |
+----------------------+----------------------+-----------------------+
| PointLight           | Poin                 | P                     |
|                      | tLightShadowRenderer | ointLightShadowFilter |
+----------------------+----------------------+-----------------------+
| SpotLight            | Spo                  | SpotLightShadowFilter |
|                      | tLightShadowRenderer |                       |
+----------------------+----------------------+-----------------------+
| AmbientLight         | (not applicable)     | (not applicable)      |
+----------------------+----------------------+-----------------------+</p><p>You only need one shadow simulation per light source: if you use shadow
rendering, you won&#x27;t need a shadow filter and vice versa. Which way is
more efficient depends partly on the complexity of your scene. All six
shadow simulation classes have similar interfaces, so once you know how
to use one, you can easily figure out the rest.</p><p>Shadow calculations (cast and receive) have a performance impact, so use
them sparingly. With shadow renderers, you can turn off shadow casting
and/or shadow receiving for individual geometries, for portions of the
scene graph, or for the entire scene:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">spatial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Inherit</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// This is the default setting for new spatials.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Off</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Disable shadows for the whole scene, except where overridden.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">wall</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">CastAndReceive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The wall can cast shadows and also receive them.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">floor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Receive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// Any shadows cast by the floor would be hidden by it.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">airplane</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Cast</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// There&#x27;s nothing above the airplane to cast shadows on it.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">ghost</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setShadowMode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ShadowMode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">Off</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// The ghost is translucent: it neither casts nor receives shadows.</span></div></div></div></div></div><p>Both shadow renderers and shadow filters use shadow modes to determine
which objects can cast shadows. However, only the shadow renderers pay
attention to shadow modes when determining which objects receive
shadows. With a shadow filter, shadow modes have no effect on which
objects receive shadows.</p><p>Here&#x27;s a sample application which demonstrates both
DirectionalLightShadowRenderer and DirectionalLightShadowFilter:</p><ul><li><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/light/TestDirectionalLightShadow.java">TestDirectionalLightShadow.java</a></li></ul><p>Here is the key code fragment:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">DirectionalLight</span><span class="token plain"> sun </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DirectionalLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ColorRGBA</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">White</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDirection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cam</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDirection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* Drop shadows */</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> SHADOWMAP_SIZE</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DirectionalLightShadowRenderer</span><span class="token plain"> dlsr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DirectionalLightShadowRenderer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SHADOWMAP_SIZE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">dlsr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">viewPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addProcessor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dlsr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">DirectionalLightShadowFilter</span><span class="token plain"> dlsf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">DirectionalLightShadowFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SHADOWMAP_SIZE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">dlsf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setLight</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sun</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">dlsf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">FilterPostProcessor</span><span class="token plain"> fpp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FilterPostProcessor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">fpp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dlsf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">viewPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addProcessor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fpp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>Constructor arguments:</p><ul><li><p>Your AssetManager object.</p></li><li><p>Size of the rendered shadow maps, in pixels per side (512, 1024,
2048, etc...).</p></li><li><p>The number of shadow maps rendered (more shadow maps = better
quality, but slower).</p></li></ul><p>Properties you can set:</p><ul><li><p>setDirection(Vector3f) -- the direction of the light</p></li><li><p>setLambda(0.65f) -- to reduce the split size</p></li><li><p>setShadowIntensity(0.7f) -- shadow darkness (1=black, 0=invisible)</p></li><li><p>setShadowZextend(float) -- distance from camera to which shadows
will be computed</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="screen-space-ambient-occlusion"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#screen-space-ambient-occlusion" title="Direct link to heading">#</a>Screen Space Ambient Occlusion</h1><p>Full sample code</p><ul><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/post/TestSSAO.java">TestSSAO.java</a>
-- Screen-Space Ambient Occlusion shadows</p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/post/TestTransparentSSAO.java">TestTransparentSSAO.java</a>
-- Screen-Space Ambient Occlusion shadows plus transparancy</p></li><li><p><a href="https://hub.jmonkeyengine.org/t/ssao-for-monkeys/13369">Screen Space Ambient Occlusion for jMonkeyEngine
(article)</a></p></li></ul><p>Ambient Occlusion refers to the shadows which nearby objects cast on
each other under an ambient lighting. Screen Space Ambient Occlusion
(SSAO) approximates how light radiates in real life.</p><p>In JME3, SSAO is implemented by adding an instance of
<code>com.jme3.post.SSAOFilter</code> to a viewport which already simulates shadows
using another method such as DirectionalLightShadowRenderer.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">FilterPostProcessor</span><span class="token plain"> fpp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">FilterPostProcessor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">SSAOFilter</span><span class="token plain"> ssaoFilter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SSAOFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">12.94f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">43.92f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.33f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.61f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">fpp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addFilter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ssaoFilter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">viewPort</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addProcessor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fpp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p><img src="../../jme3/advanced/shading-textured-ani.gif" alt="Shading with and without Ambient
Occlusion"></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/light_and_shadow.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#pointlight" class="contents__link">PointLight</a></li><li><a href="#directionallight" class="contents__link">DirectionalLight</a></li><li><a href="#spotlight" class="contents__link">SpotLight</a></li><li><a href="#ambientlight" class="contents__link">AmbientLight</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemo/styles.08ff7081.js"></script>

<script src="/wikidemo/runtime~main.7418f8ca.js"></script>

<script src="/wikidemo/main.0c3323ac.js"></script>

<script src="/wikidemo/1.e501629b.js"></script>

<script src="/wikidemo/2.c824d386.js"></script>

<script src="/wikidemo/302.1d1a2997.js"></script>

<script src="/wikidemo/394d525a.30c299b8.js"></script>

<script src="/wikidemo/17896441.d065d5f5.js"></script>

<script src="/wikidemo/587f0361.95004371.js"></script>


</body>
</html>