<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="/js/dark_default.js"></script>

<title data-react-helmet="true">level_of_detail | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="level_of_detail | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="A mesh with a high level of detail has lots of polygons and looks good"><meta data-react-helmet="true" property="og:description" content="A mesh with a high level of detail has lots of polygons and looks good"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/level_of_detail">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemo/img/favicon.ico">


<link rel="stylesheet" href="/wikidemo/styles.7d008dc0.css">


<link rel="preload" href="/wikidemo/styles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemo/runtime~main.7418f8ca.js" as="script">

<link rel="preload" href="/wikidemo/main.1b6aa70f.js" as="script">

<link rel="preload" href="/wikidemo/1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo/2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo/302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo/394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo/17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo/8ea98fd0.7237d69f.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">level_of_detail</h1></header><div class="markdown"><p>A mesh with a high level of detail has lots of polygons and looks good
close up. But when the mesh is further away (and the detail is not
visible), the high-polygon count slows down performance unnecessarily.</p><p>One solution for this problem is to use high-detail meshes for objects
close to the camera, and low-detail meshes for objects far from the
camera. As the player moves through the scene, you must keep replacing
close objects by more detailed meshes, and far objects by less detailed
meshes. The goal is to keep few high-quality slow-rendering objects in
the foreground, and many low-quality fast-rendering objects in the
background. (Experienced users can compare this approach to <a href="/wikidemo/docs/jme3/advanced/terrain">JME&#x27;s
TerraMonkey terrain system</a>, which
internally uses the specialized GeoMipMapping algorithm to generate a
terrain&#x27;s Levels of Detail.)</p><p>You see now why you may want to be able to generate Levels of Detail for
complex Geometries automatically. JME3 supports a Java implementation of
the Ogre engine&#x27;s LOD generator (originally by Péter Szücs and Stan
Melax): You use
<a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-core/src/tools/java/jme3tools/optimize/LodGenerator.java">jme3tools.optimize.LodGenerator</a>
in conjunction with
<a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-core/src/main/java/com/jme3/scene/control/LodControl.java">com.jme3.scene.control.LodControl</a>.</p><p>For a demo, run
<a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/stress/TestLodGeneration.java">TestLodGeneration.java</a>
from <a href="/wikidemo/docs/sdk/sample_code">JmeTests</a>, then press +/- and spacebar
to experiment. The following screenshots show a monkey model with three
reduced Levels of Detail:</p><p><img src="../../jme3/advanced/jmonkey-lod.gif" alt="jmonkey-lod.gif"></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="usage"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a>Usage</h1><p>To activate this optimization:</p><ol><li><p>Pick a reduction method and values for the Geometry. (Trial and
error...)</p></li><li><p>Generate LODs for the Geometry, either in the SDK or in code.</p></li><li><p>Add an LOD control to the Geometry.</p></li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="pick-reduction-methods-and-values"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#pick-reduction-methods-and-values" title="Direct link to heading">#</a>Pick Reduction Methods and Values</h1><p>There are several reduction methods to generate a low-polygon version
from a high-polygon model. Don&#x27;t worry, the reduction does not modify
the original model.</p><p>+------------------------+--------------------------------------+------+
| Reduction Method       | Description                          | R    |
|                        |                                      | educ |
|                        |                                      | tion |
|                        |                                      | V    |
|                        |                                      | alue |
+========================+======================================+======+
| LodGene                | Collapses polygon vertices from the  | 0.0f |
| rator.TriangleReductio | mesh until the reduction cost (=     | -    |
| nMethod.COLLAPSE_COST | amount of ugly artifacts caused)     | 1.0f |
|                        | exceeds the given threshold.         |      |
+------------------------+--------------------------------------+------+
| LodGe                  | Removes the given percentage of      | 0.0f |
| nerator.TriangleReduct | polygons from the mesh.              | -    |
| ionMethod.PROPORTIONAL |                                      | 1.0f |
+------------------------+--------------------------------------+------+
| L                      | Removes the given number of polygons | int  |
| odGenerator.TriangleRe | from the mesh.                       | eger |
| ductionMethod.CONSTANT |                                      |      |
+------------------------+--------------------------------------+------+</p><p>If you don&#x27;t know which to choose, experiment. For example start by
trying COLLAPSE_COST and .5f-.9f.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="generate-lod"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generate-lod" title="Direct link to heading">#</a>Generate LOD</h1><p>You must generate and cache several LODs for each mesh, ranging from
many to few polygons. The LOD generator algorithm attempts to collaps
vertices automatically, while avoiding ugly artifacts. The LOD generator
doesn&#x27;t generate new meshes, it only creates separate reduced index
buffers for the more highly reduced levels.</p><ul><li><p>If you create geometries manually (3D models), use the SDK to
generate LODs.</p></li><li><p>If you create geometries programmatically, generate LODs from your
Java code.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="generating-lods-in-the-sdk"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-lods-in-the-sdk" title="Direct link to heading">#</a>Generating LODs in the SDK</h2><p>The SDK contains a user-friendly interface to generate LODs for a model
(.j3o file).</p><ol><li><p>Open the Projects or Files window.</p></li><li><p>Select the .j3o file in the <code>Project Assets/Models</code> directory.</p></li><li><p>Choose <code>Window Edit in SceneExplorer</code> if the SceneExplorer is not
open. Info about the selected model is now displayed in the
SceneExplorer.</p></li><li><p>RMB select the model in SceneExplorer. Choose the
<code>Tools Generate Levels of Detail</code> menu.\
<img src="/images/jme3/advanced/jme-sdk-generate-lod-menu.png" alt="The Tools Generate LOD context menu in the
SceneExplorer"></p></li><li><p>The <code>Generate LOD</code> settings wizard opens:\
<img src="/images/jme3/advanced/jme-sdk-generate-lod-window.png" alt="The Generate LOD settings
wizard"></p></li><li><p>Choose a reduction method and reduction values for one or more
levels.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Enter higher reduction values for higher levels.</p></div></div></li><li><p>Click Finish to generate the LODs for this model.</p></li></ol><p>The LODs are saved in the .j3o model file.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Choose <code>Window Properties</code> if the Properties window is not open. Choose
the generated LODs from the dropdown in the Properties window, and
verify their quality in the SceneComposer.</p></div></div><p><img src="/images/jme3/advanced/jme-sdk-generate-lod-full.png" alt="jme-sdk-generate-lod-full.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="generating-lods-in-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#generating-lods-in-code" title="Direct link to heading">#</a>Generating LODs in Code</h2><p>The <code>jme3tools.optimize.LodGenerator</code> utility class helps you generate
LODs for an arbitrary mesh (a Geometry object) programmatically from
your Java code. You create and bake one LodGenerator for each Geometry.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">LodGenerator</span><span class="token plain"> lod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LodGenerator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">geometry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">lod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">bakeLods</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reductionMethod</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">reductionValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The LODs are stored inside the Geometry object.</p><p><strong>Example:</strong> How to generate an LOD of myPrettyGeo&#x27;s mesh with the same
settings as used in the SDK example above:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">LodGenerator</span><span class="token plain"> lod </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LodGenerator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myPrettyGeo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">lod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">bakeLods</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">LodGenerator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token class-name">TriangleReductionMethod</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PROPORTIONAL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0.25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.75f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activate-the-lod-control"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#activate-the-lod-control" title="Direct link to heading">#</a>Activate the LOD Control</h1><p>After generating the LODs for the geometry, you create and add a
<code>com.jme3.scene.control.LodControl</code> to the geometry. Adding the
LodControl activates the LOD optimizaton for this geometry.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">LodControl</span><span class="token plain"> lc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">LodControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">myPrettyGeo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">attachChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myPrettyGeo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The LodControl internally gets the camera from the game&#x27;s viewport to
calculate the distance to this geometry. Depending on the distance, the
LodControl selects an appropriate level of detail, and passes more (or
less) detailed vertex data to the renderer.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="impact-on-quality-and-speed"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#impact-on-quality-and-speed" title="Direct link to heading">#</a>Impact on Quality and Speed</h1><p>+------+--------------------+-------------+-------------+-------------+
| L    | Purpose            | Distance    | Rendering   | Rendering   |
| evel |                    |             | Speed       | Quality     |
| nu   |                    |             |             |             |
| mber |                    |             |             |             |
+======+====================+=============+=============+=============+
| L    | The original mesh  | Closest     | Slowest.    | Best.       |
| evel | is used            |             |             |             |
| 0    | automatically for  |             |             |             |
|      | close-ups, and     |             |             |             |
|      | it&#x27;s the default   |             |             |             |
|      | if no LODs have    |             |             |             |
|      | been generated.    |             |             |             |
+------+--------------------+-------------+-------------+-------------+
| L    | If you generated   | The higher  | The higher  | The higher  |
| evel | LODs, JME3 uses    | the level,\ | the level,\ | the level,\ |
| 1\   | them automatically | the further | the faster. | the lower   |
| L    | as soon as the     | away.       |             | the         |
| evel | object moves into  |             |             | quality.    |
| 2\   | the background.    |             |             |             |
| L    |                    |             |             |             |
| evel |                    |             |             |             |
| 3    |                    |             |             |             |
+------+--------------------+-------------+-------------+-------------+</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="see-also"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#see-also" title="Direct link to heading">#</a>See also</h1><ul><li><p><a href="https://hub.jmonkeyengine.org/t/brand-new-lod-generator/26341">https://hub.jmonkeyengine.org/t/brand-new-lod-generator/26341</a></p></li><li><p><a href="https://github.com/worldforge/ember/tree/master/src/components/ogre/lod">https://github.com/worldforge/ember/tree/master/src/components/ogre/lod</a></p></li><li><p><a href="http://www.melax.com/polychop">http://www.melax.com/polychop</a></p></li><li><p><a href="http://sajty.elementfx.com/progressivemesh/GSoC2012.pdf">http://sajty.elementfx.com/progressivemesh/GSoC2012.pdf</a></p></li><li><p><a href="/wikidemo/docs/jme3/advanced/terrain">JME3 TerraMonkey Terrain</a></p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/level_of_detail.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#generating-lods-in-the-sdk" class="contents__link">Generating LODs in the SDK</a></li><li><a href="#generating-lods-in-code" class="contents__link">Generating LODs in Code</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemo/styles.08ff7081.js"></script>

<script src="/wikidemo/runtime~main.7418f8ca.js"></script>

<script src="/wikidemo/main.1b6aa70f.js"></script>

<script src="/wikidemo/1.e501629b.js"></script>

<script src="/wikidemo/2.c824d386.js"></script>

<script src="/wikidemo/302.1d1a2997.js"></script>

<script src="/wikidemo/394d525a.30c299b8.js"></script>

<script src="/wikidemo/17896441.d065d5f5.js"></script>

<script src="/wikidemo/8ea98fd0.7237d69f.js"></script>


</body>
</html>