<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="./js/dark_default.js"></script>

<title data-react-helmet="true">monkey_zone | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="monkey_zone | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="MonkeyZone is an multi-player demo game provided by the jME core"><meta data-react-helmet="true" property="og:description" content="MonkeyZone is an multi-player demo game provided by the jME core"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/monkey_zone">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemo/img/favicon.ico">


<link rel="stylesheet" href="/wikidemo/styles.7d008dc0.css">


<link rel="preload" href="/wikidemo/styles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemo/runtime~main.7418f8ca.js" as="script">

<link rel="preload" href="/wikidemo/main.0c3323ac.js" as="script">

<link rel="preload" href="/wikidemo/1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo/2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo/302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo/394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo/17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo/2c7b5d04.6c7290c4.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">monkey_zone</h1></header><div class="markdown"><p>MonkeyZone is an multi-player demo game provided by the jME core
developer team.</p><ul><li><p><a href="https://github.com/jMonkeyEngine/monkeyzone">Download source code</a>
(Github Repository)</p></li><li><p><a href="http://www.youtube.com/watch?v=98yITEoJvqE">Watch pre-alpha video
footage</a> (YouTube Video)</p></li><li><p><a href="http://web.archive.org/web/20121021075434/http://jmonkeyengine.org/2011/02/13/monkeyzone-a-jme3-game-from-the-core/">Read \&quot;MonkeyZone -- a jME3 game from the
core\&quot;</a>
(news article)</p></li><li><p><a href="https://hub.jmonkeyengine.org/t/open-game-finder/13399/11">Related forum thread: Open Game
Finder</a></p></li></ul><p>This open-source demo:</p><ol><li><p>showcases one possible way to implement a game with jME3, and</p></li><li><p>helps the jME team verify the jME3 API in terms of usability.</p></li></ol><p>The game idea is based on &quot;BattleZone&quot; arcade game from the 1980s, a
first-person shooter the with real-time strategy elements. The game was
written using the jMonkeyEngine SDK, and it&#x27;s based off the BasicGame
project template. It took us one week to create a playable pre-alpha,
including networking. The project design follows best practices that
make it possible to edit maps, vehicles, etc, in jMonkeyEngine SDK
without having to change the code -- This allows 3D graphic designers to
contribute models more easily. (If you feel like contributing assets or
working on parts of the game code, drop us a note!)</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="implementation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation" title="Direct link to heading">#</a>Implementation</h1><p>MonkeyZone is a multi-player game with a physics simulation. Both,
clients and server, run the physics simulation. The clients send input
data from the player group to the server, where they control the
entities, and also broadcast to the clients. Additionally, the server
sends regular syncronization data for all objects in the game to prevent
drifting. When a human user or an AI performs an action (presses a
button), the actual logic is done on the server. The results are
broadcast as data messages to the entities. When the entity is
controlled by an AI, the actual AI code (that determines where the
entity should move, and when it should perform an action) is executed on
the client. _The way MonkeyZone is implemented is just one of the many
possible ways to do a game like this in jME. Some things might be done
more efficiently, some might be done in another way completely.
MonkeyZone tries to do things the way that are most appropriate to
implement the game at hand and it shows nicely how jME3 and the standard
Java \&lt;abbr title=\&quot;Application Programming Interface\&quot;&gt;API\&lt;/abbr&gt;++
can make game development easier and faster. Also note that the way
MonkeyZone is designed is not scalable to a MMO style game, it will only
work in a FPS style environment where the whole game world can be loaded
at once._</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="terminology"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#terminology" title="Direct link to heading">#</a>Terminology</h2><p>The game uses certain terms that might be familiar to you but maybe used
in another way, so heres a quick rundown on the terms being used.</p><ul><li><p>Player -- Logical human or AI player that can enter entities and
generally act, only exists as PlayerData &quot;database&quot; with an id.</p></li><li><p>Entity -- Spatial with UserData, a world object like character,
vehicle, box or factory. The base form is defined only by a String
pointing to the j3o which already has all userdata like hitpoints,
speed etc.</p></li><li><p>User -- Human player using a client</p></li><li><p>Player Group -- Group of players that play together (e.g. one human
player and one AI companion per client). For now that&#x27;s the same as
client_id of human player for all AIControl&#x27;ed players originating
from that client.</p></li><li><p>Client -- Computer connected to server</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="manager-classes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#manager-classes" title="Direct link to heading">#</a>Manager Classes</h2><p>The WorldManager does the main work of organizing players, entities and
the world and synchronizing them between the server and client. Both
client and server use this class. Some other managers like
ClientEffectsManager only exist on the client or server and manage e.g.
effects display. The gameplay is largely controlled by the
ServerGameManager which does gameplay logic on the server, combined with
the actions issued by the AI and user on the client (see below) it
implements the gameplay. It extensively uses the functions exposed by
the WorldManager to perform actions and gather data. This is also the
class where the actions of the players are actually executed on the
server to determine the outcome (ray testing for shooting etc.).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="use-of-controls"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-of-controls" title="Direct link to heading">#</a>Use of Controls</h2><p><a href="/wikidemo/docs/jme3/advanced/custom_controls">Controls</a> are used extensively
in MonkeyZone for many aspects of the game. When a player enters an
entity, the Spatials Controls are configured based on the player that
enters. For example when the human user enters an entity, Controls that
update the user interface (DefaultHUDControl) or user input
(UserInputControl) are added to the current entity Spatial.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="as-entity-capabilities"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#as-entity-capabilities" title="Direct link to heading">#</a>...​As entity capabilities</h3><p>Controls attached to Spatials are generally used like an &quot;array of
capabilities&quot; that the entity posesses. So when an entity has a
VehicleControl its expected to be a vehicle, when its got a
CharacterControl its expected to be a character. Other Controls work
completely on their own, like CharacterAnimControl which just uses the
CharacterControl of the entity to check if the character is running,
jumping etc. and then animates the entity if it has an AnimControl.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="-to-abstract"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#-to-abstract" title="Direct link to heading">#</a>...​ to abstract</h3><p>Furthermore theres special interfaces for Controls that allow
abstraction of different Controls into one base interface. For example
ManualControl and AutonomousControl are interfaces for controls that
manage the movement of a spatial in a generalized way. This way AI code
and e.g. the UserInputControl only have to check for a valid
AutonomousControl or ManualControl on the spatial to control and move
it. The details of the movement are handled by classes like
ManualVehicleControl and AutonomousCharacterControl.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="-for-ai-functions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#-for-ai-functions" title="Direct link to heading">#</a>...​ for AI functions</h3><p>A special Control called CommandControl handles the Commands that can be
executed by user controlled players, see below.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="artificial-intelligence"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#artificial-intelligence" title="Direct link to heading">#</a>Artificial Intelligence</h2><p>MonkeyZone includes simple AI functions based on a command queue.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="commands"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#commands" title="Direct link to heading">#</a>Commands</h3><p>To implement autonomous AI players MonkeyZone uses a system of Commands
that are managed by a CommandControl that is attached to each AI player
entity controlled by the user. This CommandControl manages a list of
Commands that are executed based on priority. For example theres a
MoveCommand, a FollowCommand and an AttackCommand, Commands can however
implement more complete behavior than that, e.g. the complete logic for
a scavenging entity.</p><ul><li><p>Press the WASD keys and use the mouse to move</p></li><li><p>press space to jump</p></li><li><p>Aim and click to shoot</p></li><li><p>Type 1 to select the first Ogre</p><ul><li><p>Aim at the floor and press F1 to tell it where to go.</p></li><li><p>Aim at a target and press F2 to tell it who to follow.</p></li><li><p>Aim at the car and press F3 to make it drive the car.</p></li><li><p>Aim at a target and press F4 to tell it who to attack.</p></li><li><p>Walk close to the car and press enter to drive the car.</p></li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="triggers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#triggers" title="Direct link to heading">#</a>Triggers</h3><p>The SphereTrigger is a TriggerControl that is also attached to each AI
players current entity. It consists of a GhostControl that checks the
overlapping entities around the entity its attached to. It can be
assigned a command that is checked with every entity entering the
SphereTrigger and executed if applicable (e.g. normal &quot;attack enemy&quot;
mode).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="navmesh"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#navmesh" title="Direct link to heading">#</a>NavMesh</h3><p>For each map a navigation mesh is generated that allows the entities to
navigate the terrain. Autonomous entities automatically get a
NavigationControl based on the current map. The AutonomousControl
implementations automatically recognize the NavigationControl attached
to the Spatial and use it for navigation. The NavMeshNavigationControl
implementation contains a reference to the levels NavMesh and implements
a navigation algorithm similar to the A* algorithm.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="networking"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#networking" title="Direct link to heading">#</a>Networking</h2><p>Networking is realized in the PhysicsSyncManager which we hope to extend
to a state where it can serve as a general sync system for physics based
network games. The sync manager basically puts a timestamp on every
message sent from the server and then buffers all arriving messages on
the client within a certain time window. This allows to compensate for
messages arriving too soon or too late within the constraints of the
buffer, a future version might step the clients physics space different
to compensate for network delays without &quot;snapping&quot;.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="use-of-jmonkeyengine-sdk-tools"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#use-of-jmonkeyengine-sdk-tools" title="Direct link to heading">#</a>Use of jMonkeyEngine SDK tools</h1><p>All assets used in the game, like entity models and loaded maps can be
preconfigured and edited using the jMonkeyEngine SDK. For example, to
add a new vehicle type, a vehicle is created in the jMonkeyEngine SDK
vehicle editor and UserData like Speed, HitPoints etc. is applied
directly in the editor. When the model is loaded in the game it is
automatically configured based on these settings, the same accounts for
maps that are loaded, special Nodes that mark e.g. player start
locations are recognized automatically etc.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="userdata"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#userdata" title="Direct link to heading">#</a>UserData</h2><p>Entities (Nodes and Geometries) that are loaded from disk have certain
UserData like HitPoints, Speed etc. that is used to configure the entity
at runtime. The jMonkeyEngine SDK allows adding and editing this
UserData, so entity properties are editable visually.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="physics"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#physics" title="Direct link to heading">#</a>Physics</h2><p>VehicleControls, CharacterControls and RigidBodyControls with mesh
collision shape for terrain and objects are generated in the
jMonkeyEngine SDK and saved in the entity j3o file. When an entity is
loaded, the type of entity is identified based on the available controls
and UserData and it is configured accordingly.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="api-info"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#api-info" title="Direct link to heading">#</a>API Info</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="designer-infos"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#designer-infos" title="Direct link to heading">#</a>Designer Infos</h2><p>Editable UserData of entity Spatials:</p><ul><li><p>(float) HitPoints</p></li><li><p>(float) MaxHitPoints</p></li><li><p>(float) Speed</p></li></ul><p>Entity Spatial marking Node names:</p><ul><li><p>AimNode</p></li><li><p>CameraAttachment</p></li><li><p>ShootAttachment</p></li></ul><p>Level Spatial marking Node names:</p><ul><li><p>StartPoint</p></li><li><p>PowerSource</p></li><li><p>MetalField</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="developer-infos"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#developer-infos" title="Direct link to heading">#</a>Developer Infos</h3><p>Programmatic UserData of entities:</p><ul><li><p>(long) entity_id</p></li><li><p>(int) group_id</p></li><li><p>(long) player_id</p></li></ul><p>Programmatic PlayerData:</p><ul><li><p>(long) id</p></li><li><p>(int) group_id</p></li><li><p>(long) entity_id</p></li><li><p>(long) character_entity_id</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-future"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-future" title="Direct link to heading">#</a>The Future</h1><p>Have a look at the code and feel free to ask about it, if you want any
new features, you are free to implement them. ;) MonkeyZone is hosted at
GoogleCode, where you can check out the jMonkeyEngine SDK-ready project
via svn:</p><ol><li><p>jMonkeyEngine SDK→Team→Subversion→Checkout,</p></li><li><p>Enter the SVN URL <code>http://monkeyzone.googlecode.com/svn/trunk/</code></p></li><li><p>Download, open, and build the project</p></li><li><p>Run the server first (com.jme3.monkeyzone.ServerMain), and then a
client (com.jme3.monkeyzone.ClientMain).</p></li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="troubleshooting"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a>Troubleshooting</h1><ol><li>After download, errors could appear because
jme3tools.navmesh.util\NavMeshGenerator.java import
com.jme3.terrain.Terrain is not known, you should correct this by
setting Project Properties &gt; Libraries &gt; Add Library &gt;
jme3-libraries-terrain</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/monkey_zone.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#terminology" class="contents__link">Terminology</a></li><li><a href="#manager-classes" class="contents__link">Manager Classes</a></li><li><a href="#use-of-controls" class="contents__link">Use of Controls</a><ul><li><a href="#as-entity-capabilities" class="contents__link">...​As entity capabilities</a></li><li><a href="#-to-abstract" class="contents__link">...​ to abstract</a></li><li><a href="#-for-ai-functions" class="contents__link">...​ for AI functions</a></li></ul></li><li><a href="#artificial-intelligence" class="contents__link">Artificial Intelligence</a><ul><li><a href="#commands" class="contents__link">Commands</a></li><li><a href="#triggers" class="contents__link">Triggers</a></li><li><a href="#navmesh" class="contents__link">NavMesh</a></li></ul></li><li><a href="#networking" class="contents__link">Networking</a></li><li><a href="#userdata" class="contents__link">UserData</a></li><li><a href="#physics" class="contents__link">Physics</a></li><li><a href="#designer-infos" class="contents__link">Designer Infos</a><ul><li><a href="#developer-infos" class="contents__link">Developer Infos</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemo/styles.08ff7081.js"></script>

<script src="/wikidemo/runtime~main.7418f8ca.js"></script>

<script src="/wikidemo/main.0c3323ac.js"></script>

<script src="/wikidemo/1.e501629b.js"></script>

<script src="/wikidemo/2.c824d386.js"></script>

<script src="/wikidemo/302.1d1a2997.js"></script>

<script src="/wikidemo/394d525a.30c299b8.js"></script>

<script src="/wikidemo/17896441.d065d5f5.js"></script>

<script src="/wikidemo/2c7b5d04.6c7290c4.js"></script>


</body>
</html>