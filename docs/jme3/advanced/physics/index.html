<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.50">
<script src="./js/dark_default.js"></script>

<title data-react-helmet="true">physics | jMonkeyEngine Documentation</title>

<meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="physics | jMonkeyEngine Documentation"><meta data-react-helmet="true" name="description" content="A physics simulation is used in games and applications where objects are"><meta data-react-helmet="true" property="og:description" content="A physics simulation is used in games and applications where objects are"><meta data-react-helmet="true" property="og:url" content="https://8keep.github.io/wikidemo/docs/jme3/advanced/physics">

<link data-react-helmet="true" rel="shortcut icon" href="/wikidemo/img/favicon.ico">


<link rel="stylesheet" href="/wikidemo/styles.7d008dc0.css">


<link rel="preload" href="/wikidemo/styles.08ff7081.js" as="script">

<link rel="preload" href="/wikidemo/runtime~main.7418f8ca.js" as="script">

<link rel="preload" href="/wikidemo/main.0c3323ac.js" as="script">

<link rel="preload" href="/wikidemo/1.e501629b.js" as="script">

<link rel="preload" href="/wikidemo/2.c824d386.js" as="script">

<link rel="preload" href="/wikidemo/302.1d1a2997.js" as="script">

<link rel="preload" href="/wikidemo/394d525a.30c299b8.js" as="script">

<link rel="preload" href="/wikidemo/17896441.d065d5f5.js" as="script">

<link rel="preload" href="/wikidemo/4e9875c8.ecce3f1a.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></div><div class="navbar__items navbar__items--right"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/wikidemo/"><img class="navbar__logo" src="/wikidemo/img/iconx128.png" alt="JmonkeyEngine"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/wikidemo/docs/documentation">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/8keep/wikidemo" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">physics</h1></header><div class="markdown"><p>A physics simulation is used in games and applications where objects are
exposed to physical forces: Think of games like pool billiard and car
racing simulators. Massive objects are pulled by gravity, forces cause
objects to gain momentum, friction slows them down, solid objects
collide and bounce off one another, etc. Action and Adventure games also
make use of physics to implement solid obstacles, falling, and jumping.</p><p>The jMonkeyEngine3 has built-in support for <a href="http://jbullet.advel.cz">jBullet
Physics</a> (based on <a href="http://bulletphysics.org">Bullet
Physics</a>) via the <code>com.jme3.bullet</code> package.
This article focuses mostly on the RigidBodyControl, but also introduces
you to others.</p><p>If you are looking for info on how to respond to physics events such as
collisions, read about <a href="/wikidemo/docs/jme3/advanced/physics_listeners">Physics
Listeners</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="technical-overview"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#technical-overview" title="Direct link to heading">#</a>Technical Overview</h1><p>jME3 has a complete, slightly adapted but fully wrapped Bullet API that
uses normal jME math objects (Vector3f, Quaternion etc) as input/output
data. All normal bullet objects like RigidBodies, Constraints (called
&quot;Joints in jME3) and the various collision shapes are available, all
mesh formats can be converted from jME to bullet.</p><p>The PhysicsSpace object is the central object in bullet and all objects
have to be added to it so they are physics-enabled. You can create
multiple physics spaces as well to have multiple independent physics
simulations or to run simulations in the background that you step at a
different pace. You can also create a Bullet PhysicsSpace in jME3 with a
<code>com.jme3.bullet.BulletAppState</code> which runs a PhysicsSpace along the
update loop, which is the easiest way to instantiate a physics space. It
can be run in a mode where it runs in parallel to rendering, yet syncs
to the update loop so you can apply physics changes safely during the
update() calls of Controls and SimpleApplication.</p><p>The base bullet objects are also available as simple to use controls
that can be attached to spatials to directly control these by physics
forces and influences. The RigidBodyControl for example includes a
simple constructor that automatically creates a hull collision shape or
a mesh collision shape based on the given input mass and the mesh of the
spatial it is attached to. This makes enabling physics on a Geometry as
simple as &quot;spatial.addControl(new RigidBodyControl(1));</p><p>Due to some differences in how bullet and jME handle the scene and other
objects relations there is some things to remember about the controls
implementation:</p><ul><li><p>The collision shape is not automatically updated when the spatial
mesh changes</p><ul><li>You can update it by reattaching the control or by using the
CollisionShapeFactory yourself.</li></ul></li><li><p>In bullet the scale parameter is on the collision shape (which
equals the mesh in jME3) and not on the RigidBody so you cannot
scale a collision shape without scaling any other RigidBody with
reference of it</p><ul><li>Note that you should share collision shapes in general and that
j3o files loaded from file do that as well when instantiated
twice so this is something to consider.</li></ul></li><li><p><strong>Physics objects remain in the physics space when their spatials
are detached from the scene graph!</strong></p><ul><li>Use PhysicsSpace.remove(physicsObject) or simply
physicsControl.setEnabled(false); to remove them from the
PhysicsSpace</li></ul></li><li><p>If you apply forces to the physics object in an update() call they
might not get applied because internally bullet still runs at 60fps
while your app might run at 120.</p><ul><li><p>You can use the PhysicsTickListener interface and register with
the physics space and use the preTick() method to be sure that
you actually apply the force in the right moment.</p></li><li><p>Reading values from the physics objects in the update loop
should always yield correct values but they might not change
over several fames due to the same reason.</p></li></ul></li><li><p>Reading or writing from the physics objects during the render phase
is not recommended as this is when the physics space is stepped and
would cause data corruption. This is why the debug display does not
work properly in a threaded BulletAppState</p></li><li><p>Bullet always uses world coordinates, there is no such concept as
nodes so the object will be moved into a world location with no
regard to its parent spatial.</p><ul><li><p>You can configure this behavior using the setApplyPhysicsLocal()
method on physics controls but remember the physics space still
runs in world coordinates so you can visually detach things that
will actually still collide in the physics space.</p></li><li><p>To use the local applying to simulate e.g. the internal physics
system of a train passing by, simply create another
BulletAppState and add all models with physics controls in local
mode to a node. When you move the node the physics will happen
all the same but the objects will move along with the node.</p></li></ul></li></ul><p>When you use this physics simulation, values correspond to the following
units:</p><ul><li><p>1 length unit (1.0f) equals 1 meter,</p></li><li><p>1 weight unit (1.0f) equals 1 kilogram,</p></li><li><p>most torque and rotation values are expressed in radians.</p></li></ul><p>Bullet physics runs internally at 60fps by default. This rate is not
dependent on the actual framerate and it does not lock the framerate at
60fps. Instead, when the actual fps is higher than the physics framerate
the system will display interpolated positions for the physics objects.
When the framerate is lower than the physics framerate, the physics
space will be stepped multiple times per frame to make up for the
missing calculations.</p><p>Internally, the updating and syncing of the actual physics objects in
the BulletAppState happens in the following way:</p><ol><li><p>collision callbacks (<code>BulletAppState.update()</code>)</p></li><li><p>user update (<code>simpleUpdate</code> in main loop, <code>update()</code> in Controls and
AppStates)</p></li><li><p>physics to scenegraph syncing and applying (<code>updateLogicalState()</code>)</p></li><li><p>stepping physics (before or in parallel to <code>Application.render()</code>)</p></li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sample-code"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sample-code" title="Direct link to heading">#</a>Sample Code</h1><p>Full code samples are here:</p><ul><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestBrickWall.java">TestBrickWall.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestQ3.java">TestQ3.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestSimplePhysics.java">TestSimplePhysics.java</a></p></li><li><p><a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestWalkingChar.java">TestWalkingChar.java</a></p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="physics-application"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#physics-application" title="Direct link to heading">#</a>Physics Application</h1><p>A short overview of how to write a jME application with Physics
capabilities:</p><p>Do the following once per application to gain access to the
<code>physicsSpace</code> object:</p><ol><li><p>Make your application extend <code>com.jme3.app.SimpleApplication</code>.</p></li><li><p>Create a BulletAppState field:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">BulletAppState</span><span class="token plain"> bulletAppState</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div></li><li><p>Initialize your bulletAppState and attach it to the state manager:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">simpleInitApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    bulletAppState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">BulletAppState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    stateManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">attach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bulletAppState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>In your application, you can always access the <code>BulletAppState</code> via the
ApplicationStateManager:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">BulletAppState</span><span class="token plain"> bas </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getStateManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BulletAppState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div></div></div><p>For each Spatial that you want to be physical:</p><ol><li><p>Create a CollisionShape.</p></li><li><p>Create the PhysicsControl from the CollisionShape and a mass value.</p></li><li><p>Add the PhysicsControl to its Spatial.</p></li><li><p>Add the PhysicsControl to the PhysicsSpace.</p></li><li><p>Attach the Spatial to the rootNode (as usual).</p></li><li><p>(Optional) Implement the <code>PhysicsCollisionListener</code> interface to
respond to <code>PhysicsCollisionEvent</code>s.</p></li></ol><p>Let&#x27;s look at the details:</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-a-collisionshape"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-a-collisionshape" title="Direct link to heading">#</a>Create a CollisionShape</h1><p>A CollisionShape is a simplified shape for which physics are easier to
calculate than for the true shape of the model. This simplication
approach speeds up the simulation greatly.</p><p>Before you can create a Physics Control, you must create a
CollisionShape from the <code>com.jme3.bullet.collision.shapes</code> package.
(Read the tip under &quot;Physics Controls Code Samples&quot; on how to use
default CollisionShapes for Boxes and Spheres.)</p><p>+-----------------+---------------------------+------------------------+
| Non-Mesh        | Usage                     | Examples               |
| CollisionShape  |                           |                        |
+=================+===========================+========================+
| BoxC            | Box-shaped behaviour,     | Oblong or cubic        |
| ollisionShape() | does not roll.            | objects like bricks,   |
|                 |                           | crates, furniture.     |
+-----------------+---------------------------+------------------------+
| SphereC         | Spherical behaviour, can  | Compact objects like   |
| ollisionShape() | roll.                     | apples, soccer balls,  |
|                 |                           | cannon balls, compact  |
|                 |                           | spaceships.            |
+-----------------+---------------------------+------------------------+
| CylinderC       | Tube-shaped and           | Oblong objects like    |
| ollisionShape() | disc-shaped behaviour,    | pillars.\              |
|                 | can roll on one side.     | Disc-shaped objects    |
|                 |                           | like wheels, plates.   |
+-----------------+---------------------------+------------------------+
| CompoundC       | A CompoundCollisionShape  | A car with wheels (1   |
| ollisionShape() | allows custom             | box + 4 cylinders),    |
|                 | combinations of shapes.   | etc.                   |
|                 | Use the <code>addChildShape()</code> |                        |
|                 | method on the compound    |                        |
|                 | object to add other       |                        |
|                 | shapes to it and position |                        |
|                 | them relative to one      |                        |
|                 | another.                  |                        |
+-----------------+---------------------------+------------------------+
| CapsuleC        | A built-in compound shape | Persons, animals.      |
| ollisionShape() | of a vertical cylinder    |                        |
|                 | with one sphere at the    |                        |
|                 | top and one sphere at the |                        |
|                 | bottom. Typically used    |                        |
|                 | with                      |                        |
|                 | [CharacterCon             |                        |
|                 | trols](../../jme3/advance |                        |
|                 | d/walking_character): |                        |
|                 | A cylinder-shaped body    |                        |
|                 | does not get stuck at     |                        |
|                 | corners and vertical      |                        |
|                 | obstacles; the rounded    |                        |
|                 | top and bottom do not get |                        |
|                 | stuck on stair steps and  |                        |
|                 | ground obstacles.         |                        |
+-----------------+---------------------------+------------------------+
| SimplexC        | A physical point, line,   | Guardrails             |
| ollisionShape() | triangle, or rectangle    |                        |
|                 | Shape, defined by one to  |                        |
|                 | four points.              |                        |
+-----------------+---------------------------+------------------------+
| PlaneC          | A 2D plane. Very fast.    | Flat solid floor or    |
| ollisionShape() |                           | wall.                  |
+-----------------+---------------------------+------------------------+</p><p>All non-mesh CollisionShapes can be used for dynamic, kinematic, as well
as static Spatials. (Code samples see below)</p><p>+-----------------+---------------------------+------------------------+
| Mesh            | Usage                     | Examples               |
| CollisionShapes |                           |                        |
+=================+===========================+========================+
| Mes             | A mesh-accurate shape for | A whole static game    |
| hCollisionShape | static or kinematic       | level model.           |
|                 | Spatials. Can have        |                        |
|                 | complex shapes with       |                        |
|                 | openings and appendages.\ |                        |
|                 | <strong>Limitations:</strong>          |                        |
|                 | Collisions between two    |                        |
|                 | mesh-accurate shapes      |                        |
|                 | cannot be detected, only  |                        |
|                 | non-mesh shapes can       |                        |
|                 | collide with this shape.  |                        |
|                 | This Shape does not work  |                        |
|                 | with dynamic Spatials.    |                        |
+-----------------+---------------------------+------------------------+
| Hul             | A less accurate shape for | A dynamic 3D model.    |
| lCollisionShape | dynamic Spatials that     |                        |
|                 | cannot easily be          |                        |
|                 | represented by a          |                        |
|                 | CompoundShape.\           |                        |
|                 | <strong>Limitations:</strong> The      |                        |
|                 | shape is convex (behaves  |                        |
|                 | as if you gift-wrapped    |                        |
|                 | the object), i.e.         |                        |
|                 | openings, appendages,     |                        |
|                 | etc, are not individually |                        |
|                 | represented.              |                        |
+-----------------+---------------------------+------------------------+
| GImpac          | A mesh-accurate shape for | Complex dynamic        |
| tCollisionShape | dynamic Spatials. It uses | objects (like spiders) |
|                 | &lt;http://gi                | in Virtual Reality or  |
|                 | mpact.sourceforge.net/&gt;.\ | scientific             |
|                 | <strong>Limitations:</strong> CPU      | simulations.           |
|                 | intensive, use sparingly! |                        |
|                 | We recommend using        |                        |
|                 | HullCollisionShape (or    |                        |
|                 | CompoundShape) instead to |                        |
|                 | improve performance.      |                        |
|                 | Collisions between two    |                        |
|                 | mesh-accurate shapes      |                        |
|                 | cannot be detected, only  |                        |
|                 | non-mesh shapes can       |                        |
|                 | collide with this shape.  |                        |
+-----------------+---------------------------+------------------------+
| Heightfiel      | A mesh-accurate shape     | Static terrains.       |
| dCollisionShape | optimized for static      |                        |
|                 | terrains. This shape is   |                        |
|                 | much faster than other    |                        |
|                 | mesh-accurate shapes.\    |                        |
|                 | <strong>Limitations:</strong> Requires |                        |
|                 | heightmap data.           |                        |
|                 | Collisions between two    |                        |
|                 | mesh-accurate shapes      |                        |
|                 | cannot be detected, only  |                        |
|                 | non-mesh shapes can       |                        |
|                 | collide with this shape.  |                        |
+-----------------+---------------------------+------------------------+</p><p>On a CollisionShape, you can apply a few properties</p><p>+--------------------+-------------------------------+-----------------+
| CollisionShape     | Property                      | Examples        |
| Method             |                               |                 |
+====================+===============================+=================+
| setScale(new       | You can change the scale of   | Scale a player  |
| V                  | collisionshapes (whether it   | in the Y axis   |
| ector3f(2f,2f,2f)) | be, Simple or Mesh). You      | by 2:\          |
|                    | cannot change the scale of a  | <code>new Vect       |
|                    | CompoundCollisionShape        | or3f(1f,2f,1f)</code> |
|                    | however. A sphere collision   |                 |
|                    | shape, will change its radius |                 |
|                    | based on the X component of   |                 |
|                    | the vector passed in. You     |                 |
|                    | must scale a collision shape  |                 |
|                    | before attaching it to the    |                 |
|                    | physicsSpace, or you must     |                 |
|                    | readd it to the physicsSpace  |                 |
|                    | each time the scale changes.  |                 |
+--------------------+-------------------------------+-----------------+</p><p>The mesh-accurate shapes can use a CollisionShapeFactory as constructor
(code samples see below).</p><p>::: {.important}
Pick the simplest and most applicable shape for the mesh for what you
want to do: If you give a box a sphere collision shape, it will roll; if
you give a ball a box collision shape, it will sit on a slope. If the
shape is too big, the object will seem to float; if the shape is too
small it will seem to sink into the ground. During development and
debugging, you can make collision shapes visible by adding the following
line after the bulletAppState initialization:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// JME sdk 3.0.10  and earlier</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPhysicsSpace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableDebug</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">assetManager</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>or</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// newer versions</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setDebugEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>:::</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="collisionshape-code-samples"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#collisionshape-code-samples" title="Direct link to heading">#</a>CollisionShape Code Samples</h2><ul><li>One way of using a constructor and a Geometry&#x27;s mesh for static
Spatials:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">MeshCollisionShape level_shape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    new MeshCollisionShape(level_geo.getMesh());</span></div></div></div></div></div><ul><li>One way of using a constructor and a Geometry&#x27;s mesh for dynamic
Spatials:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">HullCollisionShape shape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    new HullCollisionShape(katamari_geo.getMesh());</span></div></div></div></div></div><ul><li>Creating a dynamic compound shape for a whole Node and subnodes:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">CompoundCollisionShape myComplexShape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    CollisionShapeFactory.createMeshShape((Node) myComplexGeometry );</span></div></div></div></div></div><ul><li>Creating a dynamic HullCollisionShape shape (or
CompoundCollisionShape with HullCollisionShapes as children) for a
Geometry:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">CollisionShape shape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    CollisionShapeFactory.createDynamicMeshShape(spaceCraft);</span></div></div></div></div></div><ul><li>An angular, non-mesh-accurate compound shape:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">CompoundCollisionShape boxShape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    CollisionShapeFactory.createBoxShape((Node) crate_geo);</span></div></div></div></div></div><ul><li>A round, non-mesh-accurate compound shape:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">SphereCollisionShape sphereShape =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    new SphereCollisionShape(1.0f);</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-physicscontrol"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-physicscontrol" title="Direct link to heading">#</a>Create PhysicsControl</h1><p>BulletPhysics are available in jME3 through PhysicsControls classes from
the com.jme3.bullet.control package. jME3&#x27;s PhysicsControl classes
directly extend BulletPhysics objects and are the recommended way to use
physics in a jME3 application. PhysicsControls are flexible and can be
added to any Spatial to make it act according to physical properties.</p><p>+-------------+---------------------------+---------------------------+
| Standard    | Usage                     | Examples                  |
| Phys        |                           |                           |
| icsControls |                           |                           |
+=============+===========================+===========================+
| Rigid       | The most commonly used    | Impacting projectiles,    |
| BodyControl | PhysicsControl. You can   | moving obstacles like     |
|             | use it for dynamic        | crates, rolling and       |
|             | objects (solid objects    | bouncing balls,           |
|             | that freely affected by   | elevators, flying aircaft |
|             | collisions, forces, or    | or space ships.\          |
|             | gravity), for static      | Solid immobile floors,    |
|             | objects (solid but not    | walls, static obstacles.  |
|             | affected by any forces),  |                           |
|             | or kinematic objects      |                           |
|             | (remote-controlled solid  |                           |
|             | objects).                 |                           |
+-------------+---------------------------+---------------------------+
| G           | Use for collision and     | A monster&#x27;s &quot;aggro        |
| hostControl | intersection detection    | radius, CharacterControl  |
|             | between physical objects. | collisions, motion        |
|             | A GhostControl itself is  | detectors, photo-electric |
|             | <em>non-solid</em> and           | alarm sensors, poisonous  |
|             | invisible. GhostControl   | or radioactive            |
|             | moves with the Spatial it | perimeters, life-draining |
|             | is attached to. Use       | ghosts, etc.              |
|             | GhostControls to          |                           |
|             | [implement custom game    |                           |
|             | intera                    |                           |
|             | ctions](../../jme3/advanc |                           |
|             | ed/physics_listeners) |                           |
|             | by adding it to a visible |                           |
|             | Geometry.                 |                           |
+-------------+---------------------------+---------------------------+</p><p>+-------------+---------------------------+---------------------------+
| Special     | Usage                     | Examples                  |
| Phys        |                           |                           |
| icsControls |                           |                           |
+=============+===========================+===========================+
| Vehi        | Special Control used for  | Cars, tanks, hover        |
| cleControl\ | [\&quot;terrestrial\&quot; vehicles | crafts, ships,            |
| PhysicsV    | with suspension and       | motorcycles...            |
| ehicleWheel | wheels](../../jme         |                           |
|             | 3/advanced/vehicles). |                           |
+-------------+---------------------------+---------------------------+
| Chara       | Special Control used for  | Upright walking persons,  |
| cterControl | [Walking                  | animals, robots...        |
|             | Chara                     |                           |
|             | cter](../../jme3/advanced |                           |
|             | /walking_character)s. |                           |
+-------------+---------------------------+---------------------------+
| BetterChara | Special Control used for  | Upright walking persons,  |
| cterControl | [Walking                  | animals, robots. Replaces |
|             | Chara                     | CharacterControl.         |
|             | cter](../../jme3/advanced |                           |
|             | /walking_character)s. |                           |
+-------------+---------------------------+---------------------------+
| Rag         | Special Control used for  | Falling persons, animals, |
| DollControl | [collapsing, flailing, or | robots, &quot;Rag dolls        |
|             | falling                   |                           |
|             | characters](../../j       |                           |
|             | me3/advanced/ragdoll) |                           |
+-------------+---------------------------+---------------------------+</p><p>Click the links for details on the special PhysicsControls. This article
is about RigidBodyControl.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="physics-control-code-samples"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#physics-control-code-samples" title="Direct link to heading">#</a>Physics Control Code Samples</h2><p>The most commonly used physics control is RigidBodyControl. The
RigidBodyControl constructor takes up to two parameters: a collision
shape and a mass (a float in kilograms). The mass parameter also
determines whether the object is dynamic (movable) or static (fixed).
For a static object such as a floor or wall, specify zero mass.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">RigidBodyControl</span><span class="token plain"> myThing_phys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> myThing_shape </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// dynamic</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">RigidBodyControl</span><span class="token plain"> myDungeon_phys </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> myDungeon_shape </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// static</span></div></div></div></div></div><p>::: {.important}
If you give your floor a non-zero mass, it will fall out of the scene!
:::</p><p>The following creates a box Geometry with the correct default
BoxCollisionShape:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token class-name">Box</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Box</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Geometry</span><span class="token plain"> box_geo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Geometry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Box&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">box_geo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0f</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// explicit non-zero mass, implicit BoxCollisionShape</span></div></div></div></div></div><p>The following creates a MeshCollisionShape for a whole loaded (static)
scene:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">gameLevel</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.0f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// explicit zero mass, implicit MeshCollisionShape</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Spheres and Boxes automatically fall back on the correct default
CollisionShape if you do not specify a CollisionShape in the
RigidBodyControl constructor. Complex static objects can fall back on
MeshCollisionShapes, unless it is a Node, in which case it will become a
CompoundCollisionShape containing a MeshCollisionShape.</p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="add-physicscontrol-to-spatial"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#add-physicscontrol-to-spatial" title="Direct link to heading">#</a>Add PhysicsControl to Spatial</h1><p>For each physical Spatial in the scene:</p><ol><li><p>Add a PhysicsControl to a Spatial.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">myThing_geo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">myThing_phys</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div></li><li><p>Remember to also attach the Spatial to the rootNode, as always!</p></li></ol><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="add-physicscontrol-to-physicsspace"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#add-physicscontrol-to-physicsspace" title="Direct link to heading">#</a>Add PhysicsControl to PhysicsSpace</h1><p>The PhysicsSpace is an object in BulletAppState that is like a rootNode
for Physics Controls.</p><ul><li>Just like you add the Geometry to the rootNode, you add its
PhysicsControl to the PhysicsSpace.</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState.getPhysicsSpace().add(myThing_phys);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">rootNode.attachChild(myThing_geo);</span></div></div></div></div></div><ul><li>When you remove a Geometry from the scene and detach it from the
rootNode, also remove the PhysicsControl from the PhysicsSpace:</li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState.getPhysicsSpace().remove(myThing_phys);</span></div><div class="token-line" style="color:#393A34"><span class="token plain">myThing_geo.removeFromParent();</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You can either add the <em>PhysicsControl</em> to the PhysicsSpace, or add the
PhysicsControl to the Geometry and then add the <em>Geometry</em> to the
PhysicsSpace. jME3 understands both and the outcome is the same.</p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="changing-the-scale-of-a-physicscontrol"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#changing-the-scale-of-a-physicscontrol" title="Direct link to heading">#</a>Changing the Scale of a PhysicsControl</h1><p>To change the scale of a PhysicsControl you must change the scale of the
collisionshape which belongs to it.</p><p>MeshCollisionShapes can have a scale correctly set, but it only works
when being constructed on a geometry (not a node).
CompoundCollisionShapes cannot be scaled at this time(the type obtained
when creating a CollisionShape from a Node i.e using imported models).</p><p>When you import a model from blender, it often comes as a Node (even if
it only contains 1 mesh), which is by de-facto automatically converted
to a CompoundCollisionShape. So when you try to scale this it won&#x27;t
work! Below illustrates an example, of how to scale an imported model:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-java codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Doesn&#x27;t scale</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This modified version contains Node -&gt; Geometry (name = &quot;MonkeyHeadGeom&quot;)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Spatial</span><span class="token plain"> model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Models/MonkeyHead.j3o&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Won&#x27;t work as this is now a CompoundCollisionShape containing a MeshCollisionShape</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCollisionShape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setScale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vector3f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPhysicsSpace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Works fine</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Spatial</span><span class="token plain"> model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> assetManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">loadModel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Models/MonkeyHead.j3o&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Same Model</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// IMPORTANT : You must navigate to the Geometry for this to work</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Geometry</span><span class="token plain"> geom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Geometry</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;MonkeyHeadGeom&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">geom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Works great (scaling of a MeshCollisionShape)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">geom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getControl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RigidBodyControl</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getCollisionShape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setScale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Vector3f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getPhysicsSpace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">geom</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>With the corresponding output below:</p><p><img src="http://i.imgur.com/Josua.png" alt="&lt;http://i.imgur.com/fAXlF.png&gt;">
<img src="http://i.imgur.com/fAXlF.png" alt="&lt;http://i.imgur.com/fAXlF.png&gt;"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="physicsspace-code-samples"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#physicsspace-code-samples" title="Direct link to heading">#</a>PhysicsSpace Code Samples</h2><p>The PhysicsSpace also manages global physics settings. Typically, you
can leave the defaults, and you don&#x27;t need to change the following
settings, but it&#x27;s good to know what they are for:</p><p>+-----------------------------------+-----------------------------------+
| bulletAppState.getPhysicsSpace()  | Usage                             |
| Method                            |                                   |
+===================================+===================================+
| setGravity(new Vector3f(0,        | Specifies the global gravity.     |
| -9.81f, 0));                      |                                   |
+-----------------------------------+-----------------------------------+
| setAccuracy(1f/60f);              | Specifies physics accuracy. The   |
|                                   | higher the accuracy, the slower   |
|                                   | the game. Decrease value if       |
|                                   | objects are passing through one   |
|                                   | another, or bounce oddly. (e.g.   |
|                                   | Change value from 1f/60f to       |
|                                   | something like 1f/80f.)           |
+-----------------------------------+-----------------------------------+
| setMaxSubSteps(4);                | Compensates low FPS: Specifies    |
|                                   | the maximum amount of extra steps |
|                                   | that will be used to step the     |
|                                   | physics when the game fps is      |
|                                   | below the physics fps. This       |
|                                   | maintains determinism in physics  |
|                                   | in slow (low-fps) games. For      |
|                                   | example a maximum number of 2 can |
|                                   | compensate for framerates as low  |
|                                   | as 30 fps (physics has a default  |
|                                   | accuracy of 60 fps). Note that    |
|                                   | setting this value too high can   |
|                                   | make the physics drive down its   |
|                                   | own fps in case its overloaded.   |
+-----------------------------------+-----------------------------------+
| setWorldMax(new Vector3f(10000f,  | Specifies the size of the physics |
| 10000f, 10000f));\                | space as two opposite corners     |
| setWorldMin(new Vector3f(-10000f, | (only applies to AXIS_SWEEP      |
| -10000f, -10000f));               | broadphase).                      |
+-----------------------------------+-----------------------------------+</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="specify-physical-properties"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#specify-physical-properties" title="Direct link to heading">#</a>Specify Physical Properties</h1><p>After you have registered, attached, and added everything, you can
adjust physical properties or apply forces.</p><p>On a RigidBodyControl, you can set the following physical properties.</p><p>+----------------------+----------------------+-----------------------+
| RigidBodyControl     | Property             | Examples              |
| Method               |                      |                       |
+======================+======================+=======================+
| setGravity(new       | You can change the   | For planet earth:\    |
| Vec                  | gravity of           | <code>new Ve               |
| tor3f(0f,-9.81f,0f)) | individual physics   | ctor3f(0f,-9.81f,0f)</code> |
|                      | objects after they   |                       |
|                      | were added to the    |                       |
|                      | PhysicsSpace.        |                       |
|                      | Gravity is a vector  |                       |
|                      | pointing from this   |                       |
|                      | Spatial towards the  |                       |
|                      | source of gravity.   |                       |
|                      | The longer the       |                       |
|                      | vector, the stronger |                       |
|                      | is gravity.\         |                       |
|                      | If gravity is the    |                       |
|                      | same absolute        |                       |
|                      | direction for all    |                       |
|                      | objects (e.g. on a   |                       |
|                      | planet surface), set |                       |
|                      | this vector globally |                       |
|                      | on the PhysicsSpace  |                       |
|                      | object and not       |                       |
|                      | individually.\       |                       |
|                      | If the center of     |                       |
|                      | gravity is relative  |                       |
|                      | (e.g. towards a      |                       |
|                      | black hole) then     |                       |
|                      | setGravity() on each |                       |
|                      | Spatial to           |                       |
|                      | constantly adjust    |                       |
|                      | the gravity vectors  |                       |
|                      | at each tick of      |                       |
|                      | their update()       |                       |
|                      | loops.               |                       |
+----------------------+----------------------+-----------------------+
| setMass(1f)          | Sets the mass in     | Person: 60f, ball:    |
|                      | kilogram. Dynamic    | 1.0f\                 |
|                      | objects have masses  | Floor: 0.0f (!)       |
|                      | &gt; 0.0f. Heavy       |                       |
|                      | dynamic objects need |                       |
|                      | more force to be     |                       |
|                      | moved and light ones |                       |
|                      | move with small      |                       |
|                      | amounts of force.\   |                       |
|                      | Static immobile      |                       |
|                      | objects (walls,      |                       |
|                      | floors, including    |                       |
|                      | buildings and        |                       |
|                      | terrains) must have  |                       |
|                      | a mass of zero!      |                       |
+----------------------+----------------------+-----------------------+
| setFriction(1f)      | Friction.\           | Ice, slides: 0.0f\    |
|                      | Slippery objects     | Soil, concrete, rock: |
|                      | have low friction.   | 1.0f                  |
|                      | The ground has high  |                       |
|                      | friction.            |                       |
+----------------------+----------------------+-----------------------+
| setRestitution(0.0f) | Bounciness. By       | Brick: 0.0f\          |
|                      | default objects are  | Rubber ball: 1.0f     |
|                      | not bouncy (0.0f).   |                       |
|                      | For a bouncy rubber  |                       |
|                      | object set this &gt;   |                       |
|                      | 0.0f.\               |                       |
|                      | Both the object and  |                       |
|                      | the surface must     |                       |
|                      | have non-zero        |                       |
|                      | restitution for      |                       |
|                      | bouncing to occur.\  |                       |
|                      | This setting has an  |                       |
|                      | impact on            |                       |
|                      | performance, so use  |                       |
|                      | it sparingly.        |                       |
+----------------------+----------------------+-----------------------+
| set                  | The amount of motion | around 0.5 to 1 *    |
| CcdMotionThreshold() | in 1 physics tick to | object diameter       |
|                      | trigger the          |                       |
|                      | continuous motion    |                       |
|                      | detection in moving  |                       |
|                      | objects that push    |                       |
|                      | one another. Rarely  |                       |
|                      | used, but necessary  |                       |
|                      | if your moving       |                       |
|                      | objects get stuck or |                       |
|                      | roll through one     |                       |
|                      | another.             |                       |
+----------------------+----------------------+-----------------------+</p><p>On a RigidBodyControl, you can apply the following physical forces:</p><p>+-----------------------------------+-----------------------------------+
| RigidBodyControl Method           | Motion                            |
+===================================+===================================+
| setPhysicsLocation()              | Positions the objects. Do not use |
|                                   | setLocalTranslation() for         |
|                                   | physical objects. Important: Make |
|                                   | certain not to make               |
|                                   | CollisionShapes overlap when      |
|                                   | positioning them.                 |
+-----------------------------------+-----------------------------------+
| setPhysicsRotation()              | Rotates the object. Do not use    |
|                                   | setLocalRotate() for physical     |
|                                   | objects.                          |
+-----------------------------------+-----------------------------------+
| setKinematic(true)                | By default, RigidBodyControls are |
|                                   | dynamic (kinematic=false) and are |
|                                   | affected by forces. If you set    |
|                                   | kinematic=true, the object is no  |
|                                   | longer affected by forces, but it |
|                                   | still affects others. A kinematic |
|                                   | is solid, and must have a mass.\  |
|                                   | (See detailed explanation below.) |
+-----------------------------------+-----------------------------------+</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="kinematic-vs-dynamic-vs-static"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#kinematic-vs-dynamic-vs-static" title="Direct link to heading">#</a>Kinematic vs Dynamic vs Static</h2><p>All physical objects...</p><ul><li><p>must not overlap.</p></li><li><p>can detect collisions and report several values about the impact.</p></li><li><p>can respond to collisions dynamically, or statically, or
kinematically.</p></li></ul><p>+-----------------+-----------------+-----------------+-----------------+
| Property        | Static          | Kinematic       | Dynamic         |
+=================+=================+=================+=================+
| Examples        | Immobile        | Re              | Interactive     |
|                 | obstacles:      | mote-controlled | objects:        |
|                 | Floors, walls,  | solid objects:  | Rolling balls,  |
|                 | buildings, ...  | Airships,       | movable crates, |
|                 |                 | meteorites,     | falling         |
|                 |                 | elevators,      | pillars, zero-g |
|                 |                 | doors;          | space ship...   |
|                 |                 | networked or    |                 |
|                 |                 | re              |                 |
|                 |                 | mote-controlled |                 |
|                 |                 | NPCs; invisible |                 |
|                 |                 | &quot;airhooks for   |                 |
|                 |                 | hinges and      |                 |
|                 |                 | joints.         |                 |
+-----------------+-----------------+-----------------+-----------------+
| Does it have a  | no, 0.0f        | yes<sup id="fnref-1"><a aria-current="page" class="footnote-ref active" href="/wikidemo/docs/jme3/advanced/physics#fn-1">1</a></sup>, &gt;0.0f | yes, &gt;0.0f     |
| mass?           |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| How does it     | never           | setLoca         | setLi           |
| move?           |                 | lTranslation(); | nearVelocity(); |
|                 |                 |                 | applyForce();\  |
|                 |                 |                 | setW            |
|                 |                 |                 | alkDirection(); |
|                 |                 |                 | for             |
|                 |                 |                 | C               |
|                 |                 |                 | haracterControl |
+-----------------+-----------------+-----------------+-----------------+
| How to place in | setPhys         | setLocal        | setPhys         |
| scene?          | icsLocation();\ | Translation();\ | icsLocation();\ |
|                 | setPhy          | setL            | setPhy          |
|                 | sicsRotation(); | ocalRotation(); | sicsRotation(); |
+-----------------+-----------------+-----------------+-----------------+
| Can it move and | no              | yes             | yes             |
| push others?    |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| Is is affected  | no              | no              | yes             |
| by forces?\     |                 |                 |                 |
| (Falls when it  |                 |                 |                 |
| mid-air? Can be |                 |                 |                 |
| pushed by       |                 |                 |                 |
| others?)        |                 |                 |                 |
+-----------------+-----------------+-----------------+-----------------+
| How to activate | setMass(0f);\   | setMass(1f);\   | setMass(1f);\   |
| this behaviour? | setKi           | setK            | setKi           |
|                 | nematic(false); | inematic(true); | nematic(false); |
+-----------------+-----------------+-----------------+-----------------+</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="when-do-i-use-kinematic-objects"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#when-do-i-use-kinematic-objects" title="Direct link to heading">#</a>When Do I Use Kinematic Objects?</h3><ul><li><p>Kinematics are solid and characters can &quot;stand on them.</p></li><li><p>When they collide, Kinematics push dynamic objects, but a dynamic
object never pushes a Kinematic.</p></li><li><p>You can hang kinematics up &quot;in mid-air and attach other
PhysicsControls to them using <a href="/wikidemo/docs/jme3/advanced/hinges_and_joints">hinges and
joints</a>. Picture them as
&quot;air hooks for flying aircraft carriers, floating islands in the
clouds, suspension bridges, swings, chains...</p></li><li><p>You can use Kinematics to create mobile remote-controlled physical
objects, such as moving elevator platforms, flying blimps/airships.
You have full control how Kinematics move, they never &quot;fall or
&quot;topple over.</p></li></ul><p>::: {.important}
The position of a kinematic RigidBodyControl is updated automatically
depending on its spatial&#x27;s translation. You move Spatials with a
kinematic RigidBodyControl programmatically, that means you write
translation and rotation code in the update loop. You describe the
motion of kinematic objects either by using methods such as
<code>setLocalTranslation()</code> or <code>move()</code>, or by using a
<a href="/wikidemo/docs/jme3/advanced/motionpath">MotionPath</a>.
:::</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="forces-moving-dynamic-objects"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#forces-moving-dynamic-objects" title="Direct link to heading">#</a>Forces: Moving Dynamic Objects</h1><p>Use the following methods to move dynamic physical objects.</p><p>+-----------------------------------+-----------------------------------+
| PhysicsControl Method             | Motion                            |
+===================================+===================================+
| setLinearVelocity(new             | Set the linear speed of this      |
| Vector3f(0f,0f,1f))               | object.                           |
+-----------------------------------+-----------------------------------+
| setAngularVelocity(new            | Set the rotational speed of the   |
| Vector3f(0f,0f,1f))               | object; the x, y and z component  |
|                                   | are the speed of rotation around  |
|                                   | that axis.                        |
+-----------------------------------+-----------------------------------+
| applyCentralForce(...)            | Move (push) the object once with  |
|                                   | a certain moment, expressed as a  |
|                                   | Vector3f.                         |
+-----------------------------------+-----------------------------------+
| applyForce(...)                   | Move (push) the object once with  |
|                                   | a certain moment, expressed as a  |
|                                   | Vector3f. Optionally, you can     |
|                                   | specify where on the object the   |
|                                   | pushing force hits.               |
+-----------------------------------+-----------------------------------+
| applyTorque(...)                  | Rotate (twist) the object once    |
|                                   | around its axes, expressed as a   |
|                                   | Vector3f.                         |
+-----------------------------------+-----------------------------------+
| applyImpulse(...)                 | An idealised change of momentum.  |
|                                   | This is the kind of push that you |
|                                   | would use on a pool billiard      |
|                                   | ball.                             |
+-----------------------------------+-----------------------------------+
| applyTorqueImpulse(...)           | An idealised change of momentum.  |
|                                   | This is the kind of push that you |
|                                   | would use on a pool billiard      |
|                                   | ball.                             |
+-----------------------------------+-----------------------------------+
| clearForces()                     | Cancels out all forces (force,    |
|                                   | torque) etc and stops the motion. |
+-----------------------------------+-----------------------------------+</p><p>::: {.important}
It is technically possible to position PhysicsControls using
setLocalTranslation(), e.g. to place them in their start position in the
scene. However you must be very careful not to cause an &quot;impossible
state where one physical object overlaps with another! Within the game,
you typically use the setters shown here exclusively.
:::</p><p>PhysicsControls also support the following advanced features:</p><p>+-----------------------------------+-----------------------------------+
| PhysicsControl Method             | Property                          |
+===================================+===================================+
| setCollisionShape(collisionShape) | Changes the collision shape after |
|                                   | creation.                         |
+-----------------------------------+-----------------------------------+
| setCollideWithGroups()\           | Collision Groups are integer bit  |
| setCollisionGroup()\              | masks -- enums are available in   |
| addCollid                         | the CollisionObject. All physics  |
| eWithGroup(COLLISION_GROUP_01)\ | objects are by default in         |
| removeColli                       | COLLISION_GROUP_01. Two objects |
| deWithGroup(COLLISION_GROUP_01) | collide when the                  |
|                                   | collideWithGroups set of one      |
|                                   | contains the Collision Group of   |
|                                   | the other. Use this to improve    |
|                                   | performance by grouping objects   |
|                                   | that will never collide in        |
|                                   | different groups (the the engine  |
|                                   | saves times because it does not   |
|                                   | need to check on them).           |
+-----------------------------------+-----------------------------------+
| setDamping(float, float)          | The first value is the linear     |
|                                   | threshold and the second the      |
|                                   | angular. This simulates dampening |
|                                   | of forces, for example for        |
|                                   | underwater scenes.                |
+-----------------------------------+-----------------------------------+
| setAngularFactor(1f)              | Set the amount of rotation that   |
|                                   | will be applied. A value of zero  |
|                                   | will cancel all rotational force  |
|                                   | outcome. (?)                      |
+-----------------------------------+-----------------------------------+
| setSleepingThreshold(float,float) | Sets the sleeping thresholds      |
|                                   | which define when the object gets |
|                                   | deactivated to save resources.    |
|                                   | The first value is the linear     |
|                                   | threshold and the second the      |
|                                   | angular. Low values keep the      |
|                                   | object active when it barely      |
|                                   | moves (slow precise performance), |
|                                   | high values put the object to     |
|                                   | sleep immediately (imprecise fast |
|                                   | performance). (?)                 |
+-----------------------------------+-----------------------------------+
| setCcdMotionThreshold(0f)         | Sets the amount of motion that    |
|                                   | has to happen in one physics tick |
|                                   | to trigger the continuous motion  |
|                                   | detection in moving objects that  |
|                                   | push one another. This avoids the |
|                                   | problem of fast objects moving    |
|                                   | through other objects. Set to     |
|                                   | zero to disable (default).        |
+-----------------------------------+-----------------------------------+
| setCcdSweptSphereRadius(.5f)      | Bullet does not use the full      |
|                                   | collision shape for continuous    |
|                                   | collision detection, instead it   |
|                                   | uses a &quot;swept sphere shape to     |
|                                   | approximate a motion, which can   |
|                                   | be imprecise and cause strange    |
|                                   | behaviors such as objects passing |
|                                   | through one another or getting    |
|                                   | stuck. Only relevant for fast     |
|                                   | moving dynamic bodies.            |
+-----------------------------------+-----------------------------------+</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You can <code>setApplyPhysicsLocal(true)</code> for an object to make it move
relatively to its local physics space. You would do that if you need a
physics space that moves with a node (e.g. a spaceship with artificial
gravity surrounded by zero-g space). By default, it&#x27;s set to false, and
all movement is relative to the world.</p></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="best-practices"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#best-practices" title="Direct link to heading">#</a>Best Practices</h1><ul><li><p><strong>Multiple Objects Too Slow?</strong> Do not overuse PhysicsControls.
Although PhysicsControls are put to &quot;sleep&quot; when they are not
moving, creating a world solely out of dynamic physics objects will
quickly bring you to the limits of your computer&#x27;s capabilities.\
<strong>Solution:</strong> Improve performance by replacing some physical
Spatials with non-physical Spatials. Use the non-physical ones for
non-solid things for which you do not need to detect collisions --
foliage, plants, effects, ghosts, all remote or unreachable objects.</p></li><li><p><strong>Complex Shape Too Slow?</strong> Breaking the level into manageable
pieces helps the engine improve performance: The less CPU-intensive
<a href="http://en.wikipedia.org/wiki/Sweep_and_prune">broadphase</a> filters
out parts of the scene that are out of reach. It only calculates the
collisions for objects that are actually close to the action.\
<strong>Solution:</strong> A huge static city or terrain model should never be
loaded as one huge mesh. Divide the scene into multiple physics
objects, with each its own CollisionShape. Choose the most simple
CollisionShape possible; use mesh-accurate shapes only for the few
cases where precision is more important than speed. For example, you
can use the very fast <code>PlaneCollisionShape</code> for flat streets, floors
and the outside edge of the scene, if you keep these pieces
separate.</p></li><li><p><strong>Eject?</strong> If you have physical nodes jittering wildy and being
ejected &quot;for no apparent reason, it means you have created an
impossible state -- solid objects overlapping. This can happen when
you position solid spatials too close to other solid spatials, e.g.
when moving them with setLocalTranslation().\
<strong>Solution:</strong> Use the debug mode to make CollisionShapes visible and
verify that CollisionShapes do not overlap.</p></li></ul><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-{=html} codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">&lt;!-- --&gt;</span></div></div></div></div></div><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">bulletAppState.getPhysicsSpace().enableDebug(assetManager);</span></div></div></div></div></div><ul><li><p><strong>Buggy?</strong> If you get weird behaviour, such as physical nodes
passing through one another, or getting stuck for no reason.\
<strong>Solution:</strong> Look at the physics space accessors and change the
acuracy and other parameters.</p></li><li><p><strong>Need more interactivity?</strong> You can actively <em>control</em> a physical
game by triggering forces. You may also want to be able <em>respond</em> to
collisions, e.g. by substracting health, awarding points, or by
playing a sound.\
<strong>Solution:</strong> To specify how the game responds to collisions, you
use <a href="/wikidemo/docs/jme3/advanced/physics_listeners">Physics Listeners</a>.</p></li></ul><div class="footnotes"><hr><ol><li id="fn-1">Inertia is calculated for kinematic objects, and you need mass to
do that.<a aria-current="page" class="footnote-backref active" href="/wikidemo/docs/jme3/advanced/physics#fnref-1">↩</a></li></ol></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/8keep/wikidemo/edit/master/docs/jme3/advanced/physics.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#collisionshape-code-samples" class="contents__link">CollisionShape Code Samples</a></li><li><a href="#physics-control-code-samples" class="contents__link">Physics Control Code Samples</a></li><li><a href="#physicsspace-code-samples" class="contents__link">PhysicsSpace Code Samples</a></li><li><a href="#kinematic-vs-dynamic-vs-static" class="contents__link">Kinematic vs Dynamic vs Static</a><ul><li><a href="#when-do-i-use-kinematic-objects" class="contents__link">When Do I Use Kinematic Objects?</a></li></ul></li></ul></div></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 jMonkeyEngine.</div></div></div></footer>
</div>

<script src="/wikidemo/styles.08ff7081.js"></script>

<script src="/wikidemo/runtime~main.7418f8ca.js"></script>

<script src="/wikidemo/main.0c3323ac.js"></script>

<script src="/wikidemo/1.e501629b.js"></script>

<script src="/wikidemo/2.c824d386.js"></script>

<script src="/wikidemo/302.1d1a2997.js"></script>

<script src="/wikidemo/394d525a.30c299b8.js"></script>

<script src="/wikidemo/17896441.d065d5f5.js"></script>

<script src="/wikidemo/4e9875c8.ecce3f1a.js"></script>


</body>
</html>