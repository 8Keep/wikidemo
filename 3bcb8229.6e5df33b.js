(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{217:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return d}));var a=n(1),i=n(9),o=(n(0),n(441)),r={},l={id:"jme3/android",title:"android",description:"jMonkeyEngine supports android deployment, and it's fully integrated in",source:"@site/docs/jme3/android.md",permalink:"/wikidemo/docs/jme3/android",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/android.md"},c=[{value:"Developer Requirements",id:"developer-requirements",children:[]},{value:"User Requirements",id:"user-requirements",children:[]},{value:"jMonkeyEngine3 Android Integration",id:"jmonkeyengine3-android-integration",children:[]},{value:"jMonkeyEngine SDK Android Integration",id:"jmonkeyengine-sdk-android-integration",children:[]},{value:"Activate Android Deployment",id:"activate-android-deployment",children:[]},{value:"Build and Run",id:"build-and-run",children:[]},{value:"Installing NBAndroid",id:"installing-nbandroid",children:[]},{value:"Notes",id:"notes",children:[]}],p={rightToc:c};function d(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"jMonkeyEngine supports android deployment, and it's fully integrated in\nthe SDK. The android support is in constant enhancement so if you have\nquestions or suggestions, please leave a comment on the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://hub.jmonkeyengine.org/t/android-deployment-via-sdk-checkbox-is-here/18579"}),"Android forum\nthread"),"!"),Object(o.b)("h1",{id:"requirements"},"Requirements"),Object(o.b)("h2",{id:"developer-requirements"},"Developer Requirements"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Install ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../documentation"}),"jMonkeyEngine SDK")," (Remember to\ninstall\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.oracle.com/technetwork/java/javase/downloads/index.html"}),"JDK"),")")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Install ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://developer.android.com/sdk/index.html"}),"Android SDK Manager\n22.6.2")," or newer."),Object(o.b)("p",{parentName:"li"},"a.  (You don't need the ADT Bundle for Windows. Choose \"USE AN\nEXISTING IDE and download the SDK Tools)"),Object(o.b)("p",{parentName:"li"},"b.  It's recommended to choose another destination folder."),Object(o.b)("p",{parentName:"li"},"c.  Start the SDK Manager and install the default selected 13\npackages (accept licenses)"))),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"../jme3/android_sdk_manager.png",alt:"android_sdk_manager.png"}))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"(Optional) Install NBAndroid in the jMonkeyEngine SDK:"),Object(o.b)("p",{parentName:"li"},"a.  Go to Tools\u2192Plugins\u2192Available Plugins."),Object(o.b)("p",{parentName:"li"},'b.  Install the "Android plugin.'))),Object(o.b)("h2",{id:"user-requirements"},"User Requirements"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},'Android 2.3 device or better with development mode ("USB-Debugging)\nenabled')),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Graphic card that supports OpenGL ES 2.0 or better")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://hub.jmonkeyengine.org/t/does-my-phone-meet-the-requirements-necessary-to-run-jmonkeyengine-3/17231"}),"Does my phone meet the requirements necessary to run jMonkeyEngine\n3?"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Remember to install the driver software on your computer"))),Object(o.b)("h1",{id:"features"},"Features"),Object(o.b)("h2",{id:"jmonkeyengine3-android-integration"},"jMonkeyEngine3 Android Integration"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"JME app encapsulated in an Android activity (the AndroidHarness).")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"JME display in a GlSurfaceView.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Android touch events are encapsulated into JME touch event or\ntranslated into mouse events.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Errors are handled universally in the Harness.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Lifecycle management"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Leaving the activity with the Back key destroys the app (quit).")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Leaving the activity with the Home key freezes the app in the\nbackground. When you return, the app is in the same state as\nwhen you left it (pause).")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Currently supports all jmetests except:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Post processing filters. Functional but most of the time very\nslow")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Shadows. Functional but most of the time very slow")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Water. Functional but very slow."))))),Object(o.b)("h2",{id:"jmonkeyengine-sdk-android-integration"},"jMonkeyEngine SDK Android Integration"),Object(o.b)("p",null,'Mobile deployment is a "one-click option next to Desktop/WebStart/Applet\ndeployment in the jMonkeyEngine SDK.'),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Automatic creation of Android harness and settings."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Ant script build target creates APK file.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Ant script run target executes APK on Android Emulator or mobile\ndevice."))))),Object(o.b)("h1",{id:"instructions"},"Instructions"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Make sure you have installed the Android Project Support into the\njMonkeyEngine SDK.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Open the jMonkeyEngine SDK Options",">","Mobile and enter the path to\nyour Android SDK directory, and click OK. E.g.\n",Object(o.b)("inlineCode",{parentName:"p"},"C:\\Program Files\\android-sdk")))),Object(o.b)("h2",{id:"activate-android-deployment"},"Activate Android Deployment"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Open an existing JME3 project, or create a new JME3 project.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Right-click the project node in the Projects Window and open the\nProperties.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"In the Application",">","Android Properties, enable Android Deployment,\nand select an Android target. E.g. ",Object(o.b)("inlineCode",{parentName:"p"},"Android 4.2.2"),'\\\nThis creates a "mobile folder in your projects directory. This\nfolder contains a complete android project with correct settings to\nrun the application using the AndroidHarness.')),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"(Restart the jMonkeyEngine)")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"A Mobile Files node appears in the Project window.\\\nIt lets you edit the MainActivitity.java, the AndroidManifest.xml,\nand build.properties."))),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"../jme3/nvyyd.png",alt:"nvyyd.png"}))),Object(o.b)("p",null,"The Android deployment option creates a separate sub-project for android\nand makes the main project and associated libraries available to the\nsub-project as libraries. The sub-project can be edited using NBAndroid\n(see below) or using Eclipse or any other IDE that supports standard\nandroid projects. Normally you do not need to edit the android project\nfiles. Exceptions are described further below. ",Object(o.b)("em",{parentName:"p"},"The libraries are first\nadded to the android sub-project when the main project is built for the\nfirst time.")),Object(o.b)("h2",{id:"build-and-run"},"Build and Run"),Object(o.b)("p",null,"Open your game project in the jMonkeyEngine SDK."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Building")),Object(o.b)("p",null,'Right-click the project node to build your project.\\\nAn APK file is created in the "dist folder.'),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Running")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Right-click the project node and choose Set Main Project.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},'Select the "Android Device build configuration next to the Run\ntoolbar button.')),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},Object(o.b)("em",{parentName:"p"},'Make sure "Compile on Save is disabled in your project\npreferences.'))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},'Run the application on a connected phone by right-clicking it and\nselecting "Run or press the "Play button in the toolbar.')),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},'The application will run and output its log to the "Output window of\nthe SDK.')),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},'When finished testing, click the "x next to the run status in the\nlower right to quit the logging output.'))),Object(o.b)("p",null,"The default android run target uses the default device set in the\nAndroid configuration utility. If you set that to a phone you can run\nthe application directly on your phone, the emulator does not support\nOpenGLES 2.0 and cannot run the engine."),Object(o.b)("p",null,"::: {.important}\nWhen running your application on some Android devices, having a\ndebugging session open via certain IDEs ",Object(o.b)("strong",{parentName:"p"},"will significantly lower\nperformance")," (some reports suggest a drop from 60 FPS to 4-8 FPS) until\nthe debug session is detached or the application is started directly\nfrom the device.\n:::"),Object(o.b)("p",null,"Optionally, download\n",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"http://code.google.com/p/jmonkeyengine/downloads/detail?name=Jme3Beta1Demo.apk&can=1&q="}),"Jme3Beta1Demo.apk")),Object(o.b)("p",null,"During build, the libraries and main jar file from the main project are\ncopied to the android project libs folder for access. During this\noperation the desktop-specific libraries are replaced with android\nspecific JARs."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Be aware that logging has been identified as having a significant\nperformance hit in Android applications. If getting poor performance\nplease try turning logging either down or off and retesting.")),Object(o.b)("h2",{id:"installing-nbandroid"},"Installing NBAndroid"),Object(o.b)("p",null,"Activating the nbandroid plugin in the jMonkeyEngine SDK is optional,\nbut recommended. You do not need the nbandroid plugin for Android\nsupport to work, however nbandroid will not interfere and will in fact\nallow you to edit the android source files and project more\nconveniently. To be able to edit, extend and code android-specific code\nin Android projects, install NBAndroid from the update center:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Open Tools\u2192Plugins\u2192Settings")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Go to Tools\u2192Plugins\u2192Available Plugins.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Install the NbAndroid plugin. (Will show up as Android)"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"If the android plugin is not in that list follow ",Object(o.b)("a",Object(a.a)({parentName:"strong"},{href:"https://bitbucket.org/nbandroid/nbandroid/wiki/Installation"}),"these\ninstructions"),".")),Object(o.b)("h2",{id:"notes"},"Notes"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The package name parameter is only used when creating the project\nand only sets the android MainActivity package name")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The needed android.jar comes with the plugin and is automatically\nadded to the android build")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"All non-android project libraries are automatically excluded from\nthe android build. This is currently hard-coded in the build script,\ncheck nbproject/mobile-impl.xml for the details.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The main application class parameter for the AndroidHarness is taken\nfrom the jme3 project settings when enabling android deployment.\nCurrently it is not updated when you change the main class package\nor name.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},'When you disable the mobile deployment option, the whole "mobile"\nfolder is deleted.')),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},'The "errors shown in the MainActivity are wrongly displayed only in\nthe editor and will disappear when you install NBAndroid (see\nbelow).')),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"To sign your application, edit the mobile/build.properties file to\npoint at valid keystore files."))),Object(o.b)("h1",{id:"android-considerations"},"Android Considerations"),Object(o.b)("p",null,"You can use the jMonkeyEngine SDK to save (theoretically) any\njMonkeyEngine app as Android app. But the application has to be prepared\nfor the fact that Android devices have a smaller screen resolution,\ntouchscreens instead of mouse buttons, and (typically) no keyboards."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Inputs:")," Devise an alternate control scheme that works for\nAndroid users (e.g. using com.jme3.input.controls.TouchListener).\nThis mobile scheme is likely quite different from the desktop\nscheme.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Effects:")," Android devices do no support 3D features as well as\nPCs -- or even not at all. This restriction includes post-processor\nfilters (depth-of-field blur, bloom, light scattering, cartoon,\netc), drop shadows, water effects, 3D Audio. Be prepared that these\neffects will (at best) slow down the application or (in the worst\ncase) not work at all. Provide the option to switch to a low-fi\nequivalent!")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"Nifty GUI:")," Use different base UI layout XML files for the mobile\nversion of your app to account for a different screen resolution."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Best Practice:")," Ideally, you write the core application code in a way\nthat it checks for the environment it's being run on, and automatically\nadapts the device's limitations by switching off effects, changing input\nmechanisms etc. Learn how to ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"../jme3/advanced/read_graphic_card_capabilites"}),"read graphic card\ncapabilites")," here."),Object(o.b)("h1",{id:"using-android-specific-functions"},"Using Android specific functions"),Object(o.b)("p",null,"As described above, you should always try to design your application as\nplatform independent as possible. If your game becomes a sudden hit on\nandroid, why not release it on Facebook as an applet as well? When your\napplication is designed in a platform independent way, you don't have to\ndo much more but check a checkbox to deploy your application as an\napplet. But what if you want to for example access the camera of an\nandroid device? Inevitably you will have to use android specific api to\naccess the camera."),Object(o.b)("p",null,'Since the main project is not configured to access the android api\ndirectly, you have to install NBAndroid (see above) to be able to edit\nthe created android project in the SDK. After installing, click the\n"open project button and navigate to the "mobile folder inside the main\nproject folder (it should show up with an android "a icon) and open it.'),Object(o.b)("p",null,Object(o.b)("img",Object(a.a)({parentName:"p"},{src:"../jme3/android_access.png",alt:"android_access.png"}))),Object(o.b)("p",null,"Although you will use android specific api, using a camera is not\nexactly android specific and so you should try to design this part of\nthe application as platform independent as possible as well. As an\nexample, if you want to use the phones camera as an image input stream\nfor a texture, you can create e.g. the AppState that manages the image\nand makes it available to the application inside the main project (no\nandroid code is needed). Then in the android part of the code you make a\nconnection to the camera and update the image in the AppState. This also\nallows you to easily support cameras on other platforms in the same way\nor fallback to something else in case the platform doesn't support a\ncamera."),Object(o.b)("p",null,"Note that you have to build the whole project once to make (new) classes\nin the main project available to the android part."),Object(o.b)("h1",{id:"signing-an-apk"},"Signing an APK"),Object(o.b)("p",null,'When you have a mobile project in the "important files" section you have\nan "Android Properties" file.\\\nThere are 2 entries in this file :\\\nkey.store=path/to/your/keystore/on/your/drive/mykeystore.keystore\\\nkey.alias=mykeystorealias'),Object(o.b)("p",null,"If those entries are filled, the apk will be signed during the build.\\\nYou'll be prompted when building to enter the password (twice). It will\ngenerate a signed apk in the dist folder of your project."),Object(o.b)("h1",{id:"more-info"},"More Info"),Object(o.b)("p",null,"There is currently no proper guidance of running on android. The SDK\nwill later provide tools to adapt the materials and other graphics\nsettings of the Android deployment version automatically."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.youtube.com/watch?feature=player_embedded&v=np3N4pCCTPo"}),"Youtube Video on Android\ndeployment"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://hub.jmonkeyengine.org/t/android-deployment-via-sdk-checkbox-is-here/18579"}),"Android Forum Thread\n(beta)"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://hub.jmonkeyengine.org/t/how-to-run-your-jme3-application-on-android-androidharness/16925"}),"Android Forum Thread\n(alpha)")))))}d.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=i.a.createContext({}),d=function(e){var t=i.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},b=function(e){var t=d(e.components);return i.a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),b=d(n),u=a,m=b["".concat(r,".").concat(u)]||b[u]||s[u]||o;return n?i.a.createElement(m,l({ref:t},p,{components:n})):i.a.createElement(m,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);