(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{171:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return h})),n.d(t,"default",(function(){return c}));var r=n(1),a=n(9),i=(n(0),n(441)),o={},l={id:"sdk/terrain_editor",title:"terrain_editor",description:"The terrain editor lets you create, modify, and paint terrain.",source:"@site/docs/sdk/terrain_editor.md",permalink:"/wikidemo/docs/sdk/terrain_editor",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/sdk/terrain_editor.md"},h=[{value:"Step 1: Terrain Size",id:"step-1-terrain-size",children:[]},{value:"Step 2: Heightmap",id:"step-2-heightmap",children:[]},{value:"Step 3: Alpha Image Detail",id:"step-3-alpha-image-detail",children:[]},{value:"Adding a new texture layer",id:"adding-a-new-texture-layer",children:[]},{value:"Changing the diffuse texture",id:"changing-the-diffuse-texture",children:[]},{value:"Adding a normal map to the texture layer",id:"adding-a-normal-map-to-the-texture-layer",children:[]},{value:"Removing a normal map from the texture layer",id:"removing-a-normal-map-from-the-texture-layer",children:[]},{value:"Changing the texture scale",id:"changing-the-texture-scale",children:[]},{value:"Tri-planar texture mapping",id:"tri-planar-texture-mapping",children:[]},{value:"Total texture count",id:"total-texture-count",children:[]}],s={rightToc:h};function c(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The terrain editor lets you create, modify, and paint terrain."),Object(i.b)("h1",{id:"controls"},"Controls"),Object(i.b)("p",null,"Terrain controls are the same as the Scene Composer, you rotate the\ncamera with the left mouse button and pan the camera with the right\nmouse button. Until you select one of the terrain tools in the toolbar,\nthen the controls change for that tool. Then left mouse button will use\nthat tool: painting, raising/lowering terrain, etc. The right mouse\nbutton might do something, depending on the tool."),Object(i.b)("h1",{id:"creating-terrain"},"Creating Terrain"),Object(i.b)("p",null,"To create terrain, first select the ",Object(i.b)("inlineCode",{parentName:"p"},"Scene")," directory under your\n",Object(i.b)("inlineCode",{parentName:"p"},"Project Assets")," folder, right click and select\n",Object(i.b)("inlineCode",{parentName:"p"},"New Other Scene Empty jme3 Scene"),". This will generate an empty scene in\nthat directory. Right click this new file and then select\n",Object(i.b)("inlineCode",{parentName:"p"},"Edit Terrain"),". This will open the new file in the ",Object(i.b)("inlineCode",{parentName:"p"},"TerrainEditor")," and\ndisplay your scenes file structure in the ",Object(i.b)("inlineCode",{parentName:"p"},"SceneExplorer")," located at the\nbottom left window of the SDK. In the ",Object(i.b)("inlineCode",{parentName:"p"},"SceneExplorer")," window, select a\nnode (usually your root node) in your scene.\\\n",Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-tut-selectnode.png",alt:"sdk-terrain-tut-selectnode.png"})),"\\\nThen click the add terrain button.\\\n",Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-tut-addterrain.png",alt:"sdk-terrain-tut-addterrain.png"})),"\\\nThis will pop up the ",Object(i.b)("inlineCode",{parentName:"p"},"Create Terrain")," wizard that will walk you through\nthe steps for creating terrain. Make sure you decide now how large you\nwant your terrain to be and how detailed you want the textures to be as\nyou cannot change it later on!"),Object(i.b)("p",null,"In order to see the terrain, you will need to add light to your scene.\nTo do this, right-click the root node in the ",Object(i.b)("inlineCode",{parentName:"p"},"SceneExplorer")," window and\nselect ",Object(i.b)("inlineCode",{parentName:"p"},"Add Light Directional Light"),". Alternatively, you can create your\nterrain and press the Toggle cam light button located in the menu at the\ntop of the open terrain window. You will need to add a light to your\nscene by code in the ",Object(i.b)("inlineCode",{parentName:"p"},"simpleinitApp()")," method later so you can see the\nterrain."),Object(i.b)("h2",{id:"step-1-terrain-size"},"Step 1: Terrain Size"),Object(i.b)("p",null,"Here you determine the size of your terrain, the total size and the\npatch size. You should probably leave the patch size alone. But the\ntotal size should be defined; this is how big your terrain is."),Object(i.b)("h2",{id:"step-2-heightmap"},"Step 2: Heightmap"),Object(i.b)("p",null,"Here you can select a heightmap generation technique to give you a\ndefault/random look of the terrain. You can also select a heightmap\nimage to pre-define how your terrain looks. By default, it will give you\na flat terrain."),Object(i.b)("h2",{id:"step-3-alpha-image-detail"},"Step 3: Alpha Image Detail"),Object(i.b)("p",null,"This step determines how large the alpha blend images are for your\nterrain. The smaller the alpha image, the less detailed you can paint\nthe terrain. Play around with this to see how big you need it to be.\nRemember that terrain does not have to be that detailed, and is often\ncovered by vegetation, rocks, and other items. So having a really\ndetailed texture is not always necessary."),Object(i.b)("h1",{id:"modifying-terrain"},"Modifying Terrain"),Object(i.b)("p",null,"Right now there are two terrain modification tools: raise and lower\nterrain.\\\n",Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-raise-lower.png",alt:"sdk-terrain-raise-lower.png"})),"\\\nThere are two sliders that affect how these tools operate:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Radius: how big the brush is")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Weight/Height: how much impact the brush has"))),Object(i.b)("p",null,"Once a tool is selected, you will see the tool marker (now an ugly wire\nsphere) on the map where your mouse is. Click and drag on the terrain to\nsee the tool change the height of the terrain."),Object(i.b)("h1",{id:"painting-terrain"},"Painting Terrain"),Object(i.b)("p",null,"Your terrain comes with one diffuse default texture, and you can have up\nto 12 total diffuse textures. It also allows you to add normal maps to\neach texture layer. There can be a maximum of 13 textures, including\nDiffuse and Normal (3 textures are taken up by alpha maps)."),Object(i.b)("p",null,"All of the textures can be controlled in the Texture Layer table by\nclicking on the textures. There are two sliders that affect how the\npaint tool operates:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Radius: how big the brush is")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"Weight/Height: how much impact the brush has."))),Object(i.b)("h2",{id:"adding-a-new-texture-layer"},"Adding a new texture layer"),Object(i.b)("p",null,"Adds a new texture layer to the terrain. The will be drawn over top of\nthe other texture layers listed above it in the list."),Object(i.b)("p",null,Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-addtexture.png",alt:"sdk-terrain-addtexture.png"}))),Object(i.b)("h2",{id:"changing-the-diffuse-texture"},"Changing the diffuse texture"),Object(i.b)("p",null,"Click on the diffuse texture image in the texture table. This will pop\nup a window with the available textures in your assets directory."),Object(i.b)("p",null,Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-editdiffuse.png",alt:"sdk-terrain-editdiffuse.png"}))),Object(i.b)("h2",{id:"adding-a-normal-map-to-the-texture-layer"},"Adding a normal map to the texture layer"),Object(i.b)("p",null,"When you add a texture layer, by default it does not add a normal map\nfor you. To add one, click on the button next to the diffuse texture for\nthat texture layer. This will pop up the texture browser. Select a\ntexture and hit Ok, and you are done.\\\n",Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-addnormaltexture.png",alt:"sdk-terrain-addnormaltexture.png"}))),Object(i.b)("h2",{id:"removing-a-normal-map-from-the-texture-layer"},"Removing a normal map from the texture layer"),Object(i.b)("p",null,"To remove a normal map from the texture layer, hit the normal map button\nfor that texture layer again, and deselect the texture. Then hit Ok and\nthe texture should be removed."),Object(i.b)("h2",{id:"changing-the-texture-scale"},"Changing the texture scale"),Object(i.b)("p",null,"The field in the table to the right of the diffuse and normal textures\nfor your texture layer is the scale. Changing that value changes the\nscale of the texture.\\\n",Object(i.b)("img",Object(r.a)({parentName:"p"},{src:"../sdk/sdk-terrain-texturescale.png",alt:"sdk-terrain-texturescale.png"})),"\\\nYou will notice that the scale changes when you switch between\nTri-Planar and normal texture mapping. Tri-planar mapping does not use\nthe texture coordinates of the geometry, but real world coordinates. And\nbecause of this, in order for the texture to look the same when you\nswitch between the two texture mapping methods, the terrain editor will\nautomatically convert the scales for you. Essentially if your scale in\nnormal texture coordinates is 16, then for tri-planar gets converted\nlike this: 1/terrainSize/16"),Object(i.b)("h2",{id:"tri-planar-texture-mapping"},"Tri-planar texture mapping"),Object(i.b)("p",null,"Tri-planar texture mapping is recommended if you have lots of\nnear-vertical terrain. With normal texture mapping the textures can look\nstretched because it is rendered on the one plane: X-Z. Tri-planar\nmapping renders the textures on three planes: X-Z, X-Y, Z-Y; and blends\nthem together based on what plane the normal of the triangle is facing\nmost on. This makes the terrain look much better, but it does have a\nperformance hit! Here is an article on tri-planar mapping:\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch01.html"}),"https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch01.html")),Object(i.b)("h2",{id:"total-texture-count"},"Total texture count"),Object(i.b)("p",null,"Terrain will support a maximum of 12 diffuse texture. And a combined\ntotal of 13 diffuse and normal maps. Most video cards are limited to 16\ntexture units (textures), and 3 are used behind the scenes of the\nterrain material for alpha blending of the textures, so you are left\nwith a maximum of 13 textures."),Object(i.b)("h1",{id:"generating-terrain-entropies-for-lod"},"Generating Terrain Entropies for LOD"),Object(i.b)("p",null,"If you are using the recommended PerspectiveLodCalculator for\ncalculating LOD levels of the terrain, then you will want to\npre-generate the entropy levels for the terrain. This is a slow process.\nIf they are not pre-generated, the LOD control will generate them for\nyou, but this will lag the user when they load the scene, and the\nterrain will flicker. Use the \\'Generate Entropies\\' button to\npre-generate the entropies for the terrain, they will be saved with it.\nNote that whenever you modify the height of the terrain, you should\nre-generate the entropies. Of course, don't do this every time, but\nmaybe just before you are ready to send the map out for testing."),Object(i.b)("h1",{id:"loading-terrain-into-your-game"},"Loading Terrain Into Your Game"),Object(i.b)("p",null,"There are a few things your code needs to do to load the terrain."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"You must first use the asset manager to load the scene, see the\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"../jme3/beginner/hello_asset"}),"hello asset tutorial"),".")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"The terrain (as you can see on the left in the editor) is a sub-node\nof the scene, so you have to write code to investigate the child\nnodes of the scene until you find the node that is the terrain, see\n",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"../jme3/the_scene_graph"}),"this tutorial for scene graph\nconcepts"),".")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"You also have to set the camera on the LOD control in order for it\nto work correctly:"))),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),"TerrainLodControl lodControl = ((Node)terrain).getControl(TerrainLodControl.class);\n            if (lodControl != null)\n                lodControl.setCamera(getCamera());\n")))}c.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),c=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},u=function(e){var t=c(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,s=h(e,["components","mdxType","originalType","parentName"]),u=c(n),p=r,b=u["".concat(o,".").concat(p)]||u[p]||d[p]||i;return n?a.a.createElement(b,l({ref:t},s,{components:n})):a.a.createElement(b,l({ref:t},s))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var h in t)hasOwnProperty.call(t,h)&&(l[h]=t[h]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);