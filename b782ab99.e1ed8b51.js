(window.webpackJsonp=window.webpackJsonp||[]).push([[216],{355:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var a=n(1),o=n(9),i=(n(0),n(441)),r={},l={id:"jme3/beginner/solutions",title:"solutions",description:"This is a user-proposed group of solutions for some or all of the",source:"@site/docs/jme3/beginner/solutions.md",permalink:"/wikidemo/docs/jme3/beginner/solutions",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/beginner/solutions.md"},s=[{value:"Exercise 1",id:"exercise-1",children:[]},{value:"Exercise 2",id:"exercise-2",children:[]},{value:"Exercise 3",id:"exercise-3",children:[]},{value:"Exercise 4",id:"exercise-4",children:[]},{value:"Exercise 5",id:"exercise-5",children:[]},{value:"Exercise 1",id:"exercise-1-1",children:[]},{value:"Exercise 2",id:"exercise-2-1",children:[]},{value:"Exercise 3",id:"exercise-3-1",children:[]},{value:"Exercise 1",id:"exercise-1-2",children:[]},{value:"Exercise 2",id:"exercise-2-2",children:[]},{value:"Exercise 3",id:"exercise-3-2",children:[]}],c={rightToc:s};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This is a user-proposed group of solutions for some or all of the\nexercises presented throughout the beginner tutorials\n(",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"../../jme3.xml#tutorials_for_beginners#"}),"jme3","#","tutorials","_","for","_","beginners"),").\nThere are several ways to do them, so take what you see with a grain of\nsalt, and actually try to do them yourself instead of jumping to the\nsolution, for it is the best way to learn!"),Object(i.b)("h1",{id:"hello-update-loop"},"Hello Update Loop"),Object(i.b)("h2",{id:"exercise-1"},"Exercise 1"),Object(i.b)("p",null,"It will spin the other way around."),Object(i.b)("h2",{id:"exercise-2"},"Exercise 2"),Object(i.b)("p",null,"First, one must declare another Geometry, for example, a red cube:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'protected Geometry redCube;\n\npublic void simpleInitApp() {\n    ...\n\n    // Creates the new cube\n    Box b2 = new Box(Vector3f.ZERO, 1, 1, 1);\n    redCube = new Geometry("red cube", b2);\n\n    // For the new cube to become red colored\n    Material mat2 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");\n    mat2.setColor("Color", ColorRGBA.Red);\n    redCube.setMaterial(mat2);\n\n    // To position the red cube next the other cube\n    redCube.move(2, 0, 0);\n\n    // Makes the red cube appear on screen\n    rootNode.attachChild(redCube);\n}\n')),Object(i.b)("p",null,"To have the red cube spin twice as fast as the other cube, simply make\nit rotate on the same axis but with double the value:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"public void simpleUpdate(float tpf) {\n    // make the player rotate\n    player.rotate(0, 2*tpf, 0);\n\n    // make the red cube rotate twice as fast the player\n    redCube.rotate(0, 4*tpf, 0);\n}\n")),Object(i.b)("h2",{id:"exercise-3"},"Exercise 3"),Object(i.b)("p",null,"One possible solution is to shrink or grow depending on current size.\nThe cube may start by either growing or shrinking. If the cube is\ngrowing, it will start shrinking instead only when it reaches a size\nlarge enough. If the cube is shrinking, it will start growing again,\nonly when the size is small enough. In short, the cube should switch\nbetween growing and shrinking when it reaches a specified maximum and\nminimum sizes. The following code is an example of this solution:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"private boolean grow = true;\n...\npublic void simpleUpdate(float tpf) {\n        if (grow) {\n                player.scale(1 + (3f * tpf));\n        } else {\n                player.scale(1 - (3f * tpf));\n        }\n\n        Vector3f s = player.getLocalScale();\n        if (s.getX() > 1.2f) {\n                grow = false;\n        } else if (s.getX() < 0.8f) {\n                grow = true;\n        }\n}\n")),Object(i.b)("p",null,"The cube starts by growing, and when it reaches a size larger than 120%\nits original size, it starts shrinking instead. The cube will then keep\nshrinking, until it reaches a size smaller than 80% its original size,\nwhich will make it start growing again, and so on."),Object(i.b)("p",null,"Another approach is to switch between shrinking and growing every chosen\nunit of time. The tpf variable stores the time per frame rendered, so if\nyou sum every tpf at the simpleUpdate method, you get the time passed\nsince the game started. Using time like a stopwatch, one may grow the\ncube for some time, and then shrink the cube for the same amount of\ntime, and start over again. The following code shows an example of this\nsolution:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"// Time passed\nprivate float timeVar = 0;\n...\npublic void simpleUpdate(float tpf) {\n    timeVar += tpf;\n    if (timeVar < 2) {\n        player.scale(1 + tpf * 0.4f);\n    } else if (timeVar < 4) {\n        player.scale(1 - tpf * 0.4f);\n    } else {\n        timeVar = 0;\n    }\n}\n")),Object(i.b)("p",null,"The cube grows for 2 two seconds, then shrinks for another 2 seconds,\nand repeats indefinitely."),Object(i.b)("p",null,"Another approach is to set the cube scale as the result of a sine wave.\nThis results in a smooth repetitive oscillating scale. Note however that\nthis approach is computational expensive due to the use of the sine\nfunction. One may create a sine wave by calculating sine as a function\nof time. As such, for each iteration of the simpleUpdate method, the\nscale is set as the result of sine as function of time plus the original\ncube scale. The following code shows an example of this approach:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"public void simpleUpdate(float tpf) {\n    float timeInSec = timer.getTimeInSeconds();\n    float initScale = 1;\n    float amplitude = 0.5f;\n    float angularFrequency = 1;\n    float scale = initScale + amplitude * FastMath.sin(timeInSec * angularFrequency);\n    player.setLocalScale(scale);\n}\n")),Object(i.b)("p",null,"The cube should repeatedly and smoothly grow and shrink and have maximum\nand minimum scale of 0.5 and 1.5 its original size. The following\nvariables can change the scale behavior:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"initScale - Sets the initial scale of cube")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"amplitude - Increases minimum and maximum scale")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"angularFrequency - Increases scale speed"))),Object(i.b)("h2",{id:"exercise-4"},"Exercise 4"),Object(i.b)("p",null,"Same logic! Use a timeVar, and make the Material declaration +\ninitialization line we had @ simpleInitApp() into only the\ninitialization, with the Material mat; going as a global variable, so we\ncan access it on the simpleUpdate()! Like so:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"protected Material mat;\n")),Object(i.b)("p",null,"As global var, then the initialization cuts off the Material bit:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");\n')),Object(i.b)("p",null,"And then the simpleUpdate()"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'public void simpleUpdate(float tpf) {\n    timeVar += tpf;\n    if (timeVar > 1) {\n        mat.setColor("Color", ColorRGBA.randomColor());\n        timeVar= 0;\n    }\n}\n')),Object(i.b)("h2",{id:"exercise-5"},"Exercise 5"),Object(i.b)("p",null,"A possible solution is to change the rotation axis of player from y to\nx, and make it move along the z axis:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"public void simpleUpdate(float tpf) {\n    // make the player rotate\n    player.rotate(2*tpf, 0, 0);\n    player.move(0, 0, 2*tpf);\n}\n")),Object(i.b)("p",null,"The above code should make the player roll towards the camera."),Object(i.b)("h1",{id:"hello-input"},"Hello Input"),Object(i.b)("h2",{id:"exercise-1-1"},"Exercise 1"),Object(i.b)("p",null,"First, add the mappings for the Up and Down actions to the initKeys()\nmethod:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'private void initKeys() {\n    ...\n    inputManager.addMapping("Up", new KeyTrigger(KeyInput.KEY_H));\n    inputManager.addMapping("Down", new KeyTrigger(KeyInput.KEY_L));\n    ...\n    inputManager.addListener(combinedListener, new String[]{"Left", "Right", "Up", "Down", "Rotate"});\n}\n')),Object(i.b)("p",null,"Then implement the actions in the onAnalog() method:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'public void onAnalog(String name, float value, float tpf) {\n    if (isRunning) {\n        ...\n        if (name.equals("Up")) {\n            Vector3f v = player.getLocalTranslation();\n            player.setLocalTranslation(v.x, v.y + value * speed, v.z);\n        }\n        if (name.equals("Down")) {\n            Vector3f v = player.getLocalTranslation();\n            player.setLocalTranslation(v.x, v.y - value * speed, v.z);\n        }\n    } else {\n        ...\n    }\n}\n')),Object(i.b)("p",null,"This should enable cube to move upwards, if the H key is pressed, and\ndownwards, if the L key is pressed."),Object(i.b)("h2",{id:"exercise-2-1"},"Exercise 2"),Object(i.b)("p",null,"Following the proposed solution 1, add new mappings for the mouse wheel\nin the initKeys() method:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'private void initKeys() {\n    ...\n    inputManager.addMapping("Up", new KeyTrigger(KeyInput.KEY_H),\n                                  new MouseAxisTrigger(MouseInput.AXIS_WHEEL, true));\n    inputManager.addMapping("Down", new KeyTrigger(KeyInput.KEY_L),\n                                    new MouseAxisTrigger(MouseInput.AXIS_WHEEL, false));\n    ...\n}\n')),Object(i.b)("p",null,"Now you should be able to scroll the cube up or down with the mouse\nwheel."),Object(i.b)("h2",{id:"exercise-3-1"},"Exercise 3"),Object(i.b)("p",null,"When the controls are user-chosen."),Object(i.b)("h1",{id:"hello-picking"},"Hello Picking"),Object(i.b)("h2",{id:"exercise-1-2"},"Exercise 1"),Object(i.b)("p",null,"You can jump right off and obtain the hit object's material, by acessing\nthe \"closest object we previously acquired, obtain it's geometry through\n.getGeometry(), and then get the Geometry's material through\n.getMaterial(), like so:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"Material g = closest.getGeometry().getMaterial();\n")),Object(i.b)("p",null,"It's the same as going through the two steps hinted in the tips:\n",Object(i.b)("inlineCode",{parentName:"p"},"Geometry g = closest.getGeometry(); Material material = g.getMaterial();"),"\nFinally, you need only add this line:\n",Object(i.b)("inlineCode",{parentName:"p"},"material.setColor(\u201cColor, ColorRGBA.randomColor())")," , which will change\nthe material from the hit object to a random color!"),Object(i.b)("p",null,"The lines can be added anywhere within the ",Object(i.b)("inlineCode",{parentName:"p"},"if (results.size() > 0)"),"\nblock, after declaring the closest object. End result is as so:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'Material material = closest.getGeometry().getMaterial();\nmaterial.setColor("Color", ColorRGBA.randomColor());\n')),Object(i.b)("h2",{id:"exercise-2-2"},"Exercise 2"),Object(i.b)("p",null,"First of all, we need some light shed to make the model visible! Add a\nsimple DirectionalLight like previously showed. Then, declare a\n",Object(i.b)("inlineCode",{parentName:"p"},"Spatial golem")," variable outside of methods. Then initialize golem to\nload his model:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'golem = assetManager.loadModel("Models/Oto/Oto.mesh.xml");\n')),Object(i.b)("p",null,"Now we need him to show up! So we need to attach him: but the rootNode\nwon't do, because we're checking collision with it's child, the\nshootables node! So we attach it to shootables!"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"shootables.attachChild(golem);\n")),Object(i.b)("h2",{id:"exercise-3-2"},"Exercise 3"),Object(i.b)("p",null,"Here is my code, it works and it is well commented."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'package jme3test.helloworld;\n\nimport com.jme3.app.SimpleApplication;\nimport com.jme3.collision.CollisionResult;\nimport com.jme3.collision.CollisionResults;\nimport com.jme3.font.BitmapText;\nimport com.jme3.input.KeyInput;\nimport com.jme3.input.MouseInput;\nimport com.jme3.input.controls.ActionListener;\nimport com.jme3.input.controls.KeyTrigger;\nimport com.jme3.input.controls.MouseButtonTrigger;\nimport com.jme3.light.DirectionalLight;\nimport com.jme3.material.MatParam;\nimport com.jme3.material.Material;\nimport com.jme3.math.ColorRGBA;\nimport com.jme3.math.Ray;\nimport com.jme3.math.Vector3f;\nimport com.jme3.scene.Geometry;\nimport com.jme3.scene.Node;\nimport com.jme3.scene.Spatial;\nimport com.jme3.scene.shape.Box;\nimport com.jme3.scene.shape.Sphere;\nimport com.jme3.system.SystemListener;\n\npublic class HelloPicking extends SimpleApplication\n{\n\n    public static void main(String[] args)\n    {\n    HelloPicking app = new HelloPicking();\n    app.start();\n    }\n    private Node shootables;\n    private Node inventory;\n    private Vector3f oldPosition;\n\n    @Override\n    public void simpleInitApp()\n    {\n    initCrossHairs();\n    initKeys();\n    shootables = new Node("Shootables");\n    inventory = new Node("Inventory");\n    guiNode.attachChild(inventory);\n    // add a light to the HUD so we can see the robot\n    DirectionalLight sun = new DirectionalLight();\n    sun.setDirection(new Vector3f(0, 0, -1.0f));\n    guiNode.addLight(sun);\n    rootNode.attachChild(shootables);\n    shootables.attachChild(makeCube("a Dragon", -2f, 0f, 1f));\n    shootables.attachChild(makeCube("a tin can", 1f, -2f, 0f));\n    shootables.attachChild(makeCube("the Sheriff", 0f, 1f, -2f));\n    shootables.attachChild(makeCube("the Deputy", 1f, 0f, -4f));\n    shootables.attachChild(makeFloor());\n    shootables.attachChild(makeCharacter());\n    }\n    private ActionListener actionListener = new ActionListener()\n    {\n    public void onAction(String name, boolean keyPressed, float tpf)\n    {\n        if (name.equals("Shoot") && !keyPressed)\n        {\n        if (!inventory.getChildren().isEmpty())\n        {\n            Spatial s1 = inventory.getChild(0);\n            // scale back\n            s1.scale(.02f);\n            s1.setLocalTranslation(oldPosition);\n            inventory.detachAllChildren();\n            shootables.attachChild(s1);\n        }\n        else\n        {\n            CollisionResults results = new CollisionResults();\n            Ray ray = new Ray(cam.getLocation(), cam.getDirection());\n            shootables.collideWith(ray, results);\n\n            if (results.size() > 0)\n            {\n            CollisionResult closest = results.getClosestCollision();\n            Spatial s = closest.getGeometry();\n            // we cheat Model differently with simple Geometry\n            // s.parent is Oto-ogremesh when s is Oto_geom-1 and that is what we need\n            if (s.getName().equals("Oto-geom-1"))\n            {\n                s = s.getParent();\n            }\n            // It\'s important to get a clone or otherwise it will behave weird\n            oldPosition = s.getLocalTranslation().clone();\n            shootables.detachChild(s);\n            inventory.attachChild(s);\n            // make it bigger to see on the HUD\n            s.scale(50f);\n            // make it on the HUD center\n            s.setLocalTranslation(settings.getWidth() / 2, settings.getHeight() / 2, 0);\n            }\n        }\n        }\n    }\n    };\n\n    private void initKeys()\n    {\n    inputManager.addMapping("Shoot",\n                new KeyTrigger(KeyInput.KEY_SPACE),\n                new MouseButtonTrigger(MouseInput.BUTTON_LEFT));\n    inputManager.addListener(actionListener, "Shoot");\n    }\n    protected Geometry makeCube(String name, float x, float y, float z)\n    {\n    Box box = new Box(1, 1, 1);\n    Geometry cube = new Geometry(name, box);\n    cube.setLocalTranslation(x, y, z);\n    Material mat1 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");\n    mat1.setColor("Color", ColorRGBA.randomColor());\n    cube.setMaterial(mat1);\n    return cube;\n    }\n    protected Geometry makeFloor()\n    {\n    Box box = new Box(15, .2f, 15);\n    Geometry floor = new Geometry("the Floor", box);\n    floor.setLocalTranslation(0, -4, -5);\n    Material mat1 = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");\n    mat1.setColor("Color", ColorRGBA.Gray);\n    floor.setMaterial(mat1);\n    return floor;\n    }\n    protected void initCrossHairs()\n    {\n    setDisplayStatView(false);\n    guiFont = assetManager.loadFont("Interface/Fonts/Default.fnt");\n    BitmapText ch = new BitmapText(guiFont, false);\n    ch.setSize(guiFont.getCharSet().getRenderedSize() * 2);\n    ch.setText("+");\n    ch.setLocalTranslation(\n        settings.getWidth() / 2 - ch.getLineWidth() / 2, settings.getHeight() / 2 + ch.getLineHeight() / 2, 0);\n    guiNode.attachChild(ch);\n    }\n    protected Spatial makeCharacter()\n    {\n    Spatial golem = assetManager.loadModel("Models/Oto/Oto.mesh.xml");\n    golem.scale(0.5f);\n    golem.setLocalTranslation(-1.0f, -1.5f, -0.6f);\n    System.out.println("golem.locaoTranslation:" + golem.getLocalTranslation());\n    DirectionalLight sun = new DirectionalLight();\n    sun.setDirection(new Vector3f(0, 0, -1.0f));\n    golem.addLight(sun);\n    return golem;\n    }\n}\n')))}p.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),p=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},m=function(e){var t=p(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(n),u=a,b=m["".concat(r,".").concat(u)]||m[u]||h[u]||i;return n?o.a.createElement(b,l({ref:t},c,{components:n})):o.a.createElement(b,l({ref:t},c))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);