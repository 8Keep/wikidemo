(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{198:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var r=n(1),a=n(9),o=(n(0),n(441)),i={},l={id:"jme3/contributions/cubes/tools/serialization",title:"serialization",description:"Whenever things have to be saved and loaded again (e.g. sending a map",source:"@site/docs/jme3/contributions/cubes/tools/serialization.md",permalink:"/wikidemo/docs/jme3/contributions/cubes/tools/serialization",editUrl:"https://github.com/8keep/wikidemo/edit/master/docs/jme3/contributions/cubes/tools/serialization.md"},c=[],s={rightToc:c};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,'Whenever things have to be saved and loaded again (e.g. sending a map\nfrom the server to the clients), people talk about "serialization -\nBasically, this means breaking a complex structure (like our block\nworld) down to a simple row of data.'),Object(o.b)("p",null,'"Cubes supports bit-serializing - You can export your block terrain at\nany time to a row of bits, most of the time handled as ',Object(o.b)("strong",{parentName:"p"},"byte","[","]"),"\narray. Later, the complete terrain can be reconstructed by those raw\nbytes."),Object(o.b)("h1",{id:"serializing"},"Serializing"),Object(o.b)("p",null,"So, how do we convert a complete block world to bytes?"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),"byte[] serializedTerrainData = CubesSerializer.writeToBytes(blockTerrain);\n")),Object(o.b)("p",null,"Well... That was pretty easy, or? You don't have to worry, ",Object(o.b)("em",{parentName:"p"},"how")," your\nterrain is magically pressed in the data, the framework directly offers\nyou the bytes, that you need to reconstruct the whole thing."),Object(o.b)("h1",{id:"data-transport"},"Data Transport"),Object(o.b)("p",null,"Actually, this part is on your own - There are many ways how to get data\nfrom one place to another and they all depend on your application.\nYou'll have to find out how to get those bytes to the place where you\nwant to rebuild the terrain - Make sure, you read the possible scenarios\nlisted below."),Object(o.b)("h1",{id:"unserializing"},"Unserializing"),Object(o.b)("p",null,"At this point, you have successfully received the bytes and want to\nrecreate your awesome block world - This is how you do it:"),Object(o.b)("pre",null,Object(o.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),"//The old blockTerrain will be completely replaced!\n//(Even the chunks count will be adjusted)\nBlockTerrainControl blockTerrainClone = new BlockTerrainControl(new Vector3Int());\nCubesSerializer.readFromBytes(blockTerrain, serializedTerrainData);\n")),Object(o.b)("p",null,"This screenshot shows a terrain and it's unserialized clone - Note, that\nthe blocks have to be registered in the ",Object(o.b)("strong",{parentName:"p"},"same order")," on both sides in\norder to reproduce the same terrain!"),Object(o.b)("p",null,Object(o.b)("img",Object(r.a)({parentName:"p"},{src:"http://destroflyer.mania-community.de/other/imagehost/cubes/test_serialize.png",alt:"test_serialize.png"}))),Object(o.b)("h1",{id:"possible-scenarios"},"Possible scenarios"),Object(o.b)("p",null,"The most typical examples for serializing are the following:"),Object(o.b)("p",null,"+----------------------+----------------------+-----------------------+\n| Application          | Data Transport       | Resources             |\n+======================+======================+=======================+\n| Networking           | The bytes are sent   | ","[Spidermonkey]","        |\n|                      | in a message over    | (../../../../jme3/adv |\n|                      | the network - The    | anced/networking) |\n|                      | client receives them |                       |\n|                      | and can rebuild the  |                       |\n|                      | block world.         |                       |\n+----------------------+----------------------+-----------------------+\n| Files                | The bytes are saved  | ","[java.io.File]","(h      |\n|                      | in a file, which can | ttp://docs.oracle.com |\n|                      | be loaded again next | /javase/tutorial/esse |\n|                      | time.                | ntial/io/fileio.html) |\n+----------------------+----------------------+-----------------------+"),Object(o.b)("h1",{id:"advanced-bitserializing"},"Advanced: BitSerializing"),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"This part of the article will handle a more advanced way of how to\naccess the bit serializer of the framework. As long as it's not written\nyet, please take a look at the classes ",Object(o.b)("inlineCode",{parentName:"em"},"cubes.network.BitInputStream"),",\n",Object(o.b)("inlineCode",{parentName:"em"},"cubes.network.BitOutputStream")," and the interface\n",Object(o.b)("inlineCode",{parentName:"em"},"cubes.network.BitSerializable")," that's implemented by the\n",Object(o.b)("inlineCode",{parentName:"em"},"cubes.BlockTerrainControl")," class.")))}b.isMDXComponent=!0},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),b=function(e){var t=a.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},p=function(e){var t=b(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(n),d=r,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||o;return n?a.a.createElement(m,l({ref:t},s,{components:n})):a.a.createElement(m,l({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);